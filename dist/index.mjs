#!/usr/bin/env node
var ps=Object.create;var dt=Object.defineProperty;var fs=Object.getOwnPropertyDescriptor;var ms=Object.getOwnPropertyNames;var gs=Object.getPrototypeOf,ys=Object.prototype.hasOwnProperty;var ne=(i=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(i,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):i)(function(i){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+i+'" is not supported')});var bs=(i,e)=>()=>(i&&(e=i(i=0)),e);var m=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var ws=(i,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of ms(e))!ys.call(i,r)&&r!==t&&dt(i,r,{get:()=>e[r],enumerable:!(s=fs(e,r))||s.enumerable});return i};var xs=(i,e,t)=>(t=i!=null?ps(gs(i)):{},ws(e||!i||!i.__esModule?dt(t,"default",{value:i,enumerable:!0}):t,i));var u=bs(()=>{"use strict"});var gt=m((nn,X)=>{"use strict";u();var vs=typeof process<"u"&&process.env.TERM_PROGRAM==="Hyper",Cs=typeof process<"u"&&process.platform==="win32",pt=typeof process<"u"&&process.platform==="linux",me={ballotDisabled:"\u2612",ballotOff:"\u2610",ballotOn:"\u2611",bullet:"\u2022",bulletWhite:"\u25E6",fullBlock:"\u2588",heart:"\u2764",identicalTo:"\u2261",line:"\u2500",mark:"\u203B",middot:"\xB7",minus:"\uFF0D",multiplication:"\xD7",obelus:"\xF7",pencilDownRight:"\u270E",pencilRight:"\u270F",pencilUpRight:"\u2710",percent:"%",pilcrow2:"\u2761",pilcrow:"\xB6",plusMinus:"\xB1",question:"?",section:"\xA7",starsOff:"\u2606",starsOn:"\u2605",upDownArrow:"\u2195"},ft=Object.assign({},me,{check:"\u221A",cross:"\xD7",ellipsisLarge:"...",ellipsis:"...",info:"i",questionSmall:"?",pointer:">",pointerSmall:"\xBB",radioOff:"( )",radioOn:"(*)",warning:"\u203C"}),mt=Object.assign({},me,{ballotCross:"\u2718",check:"\u2714",cross:"\u2716",ellipsisLarge:"\u22EF",ellipsis:"\u2026",info:"\u2139",questionFull:"\uFF1F",questionSmall:"\uFE56",pointer:pt?"\u25B8":"\u276F",pointerSmall:pt?"\u2023":"\u203A",radioOff:"\u25EF",radioOn:"\u25C9",warning:"\u26A0"});X.exports=Cs&&!vs?ft:mt;Reflect.defineProperty(X.exports,"common",{enumerable:!1,value:me});Reflect.defineProperty(X.exports,"windows",{enumerable:!1,value:ft});Reflect.defineProperty(X.exports,"other",{enumerable:!1,value:mt})});var le=m((an,ge)=>{"use strict";u();var Ss=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),qs=/[\u001b\u009b][[\]#;?()]*(?:(?:(?:[^\W_]*;?[^\W_]*)\u0007)|(?:(?:[0-9]{1,4}(;[0-9]{0,4})*)?[~0-9=<>cf-nqrtyA-PRZ]))/g,ks=()=>typeof process<"u"?process.env.FORCE_COLOR!=="0":!1,yt=()=>{let i={enabled:ks(),visible:!0,styles:{},keys:{}},e=n=>{let l=n.open=`\x1B[${n.codes[0]}m`,a=n.close=`\x1B[${n.codes[1]}m`,o=n.regex=new RegExp(`\\u001b\\[${n.codes[1]}m`,"g");return n.wrap=(h,d)=>{h.includes(a)&&(h=h.replace(o,a+l));let c=l+h+a;return d?c.replace(/\r*\n/g,`${a}$&${l}`):c},n},t=(n,l,a)=>typeof n=="function"?n(l):n.wrap(l,a),s=(n,l)=>{if(n===""||n==null)return"";if(i.enabled===!1)return n;if(i.visible===!1)return"";let a=""+n,o=a.includes(`
`),h=l.length;for(h>0&&l.includes("unstyle")&&(l=[...new Set(["unstyle",...l])].reverse());h-- >0;)a=t(i.styles[l[h]],a,o);return a},r=(n,l,a)=>{i.styles[n]=e({name:n,codes:l}),(i.keys[a]||(i.keys[a]=[])).push(n),Reflect.defineProperty(i,n,{configurable:!0,enumerable:!0,set(h){i.alias(n,h)},get(){let h=d=>s(d,h.stack);return Reflect.setPrototypeOf(h,i),h.stack=this.stack?this.stack.concat(n):[n],h}})};return r("reset",[0,0],"modifier"),r("bold",[1,22],"modifier"),r("dim",[2,22],"modifier"),r("italic",[3,23],"modifier"),r("underline",[4,24],"modifier"),r("inverse",[7,27],"modifier"),r("hidden",[8,28],"modifier"),r("strikethrough",[9,29],"modifier"),r("black",[30,39],"color"),r("red",[31,39],"color"),r("green",[32,39],"color"),r("yellow",[33,39],"color"),r("blue",[34,39],"color"),r("magenta",[35,39],"color"),r("cyan",[36,39],"color"),r("white",[37,39],"color"),r("gray",[90,39],"color"),r("grey",[90,39],"color"),r("bgBlack",[40,49],"bg"),r("bgRed",[41,49],"bg"),r("bgGreen",[42,49],"bg"),r("bgYellow",[43,49],"bg"),r("bgBlue",[44,49],"bg"),r("bgMagenta",[45,49],"bg"),r("bgCyan",[46,49],"bg"),r("bgWhite",[47,49],"bg"),r("blackBright",[90,39],"bright"),r("redBright",[91,39],"bright"),r("greenBright",[92,39],"bright"),r("yellowBright",[93,39],"bright"),r("blueBright",[94,39],"bright"),r("magentaBright",[95,39],"bright"),r("cyanBright",[96,39],"bright"),r("whiteBright",[97,39],"bright"),r("bgBlackBright",[100,49],"bgBright"),r("bgRedBright",[101,49],"bgBright"),r("bgGreenBright",[102,49],"bgBright"),r("bgYellowBright",[103,49],"bgBright"),r("bgBlueBright",[104,49],"bgBright"),r("bgMagentaBright",[105,49],"bgBright"),r("bgCyanBright",[106,49],"bgBright"),r("bgWhiteBright",[107,49],"bgBright"),i.ansiRegex=qs,i.hasColor=i.hasAnsi=n=>(i.ansiRegex.lastIndex=0,typeof n=="string"&&n!==""&&i.ansiRegex.test(n)),i.alias=(n,l)=>{let a=typeof l=="string"?i[l]:l;if(typeof a!="function")throw new TypeError("Expected alias to be the name of an existing color (string) or a function");a.stack||(Reflect.defineProperty(a,"name",{value:n}),i.styles[n]=a,a.stack=[n]),Reflect.defineProperty(i,n,{configurable:!0,enumerable:!0,set(o){i.alias(n,o)},get(){let o=h=>s(h,o.stack);return Reflect.setPrototypeOf(o,i),o.stack=this.stack?this.stack.concat(a.stack):a.stack,o}})},i.theme=n=>{if(!Ss(n))throw new TypeError("Expected theme to be an object");for(let l of Object.keys(n))i.alias(l,n[l]);return i},i.alias("unstyle",n=>typeof n=="string"&&n!==""?(i.ansiRegex.lastIndex=0,n.replace(i.ansiRegex,"")):""),i.alias("noop",n=>n),i.none=i.clear=i.noop,i.stripColor=i.unstyle,i.symbols=gt(),i.define=r,i};ge.exports=yt();ge.exports.create=yt});var E=m(x=>{"use strict";u();var $s=Object.prototype.toString,D=le(),bt=!1,ee=new Set,wt={yellow:"blue",cyan:"red",green:"magenta",black:"white",blue:"yellow",red:"cyan",magenta:"green",white:"black"};x.longest=(i,e)=>i.reduce((t,s)=>Math.max(t,e?s[e].length:s.length),0);x.hasColor=i=>!!i&&D.hasColor(i);var ae=x.isObject=i=>i!==null&&typeof i=="object"&&!Array.isArray(i);x.nativeType=i=>$s.call(i).slice(8,-1).toLowerCase().replace(/\s/g,"");x.isAsyncFn=i=>x.nativeType(i)==="asyncfunction";x.isPrimitive=i=>i!=null&&typeof i!="object"&&typeof i!="function";x.resolve=(i,e,...t)=>typeof e=="function"?e.call(i,...t):e;x.scrollDown=(i=[])=>[...i.slice(1),i[0]];x.scrollUp=(i=[])=>[i.pop(),...i];x.reorder=(i=[])=>{let e=i.slice();return e.sort((t,s)=>t.index>s.index?1:t.index<s.index?-1:0),e};x.swap=(i,e,t)=>{let s=i.length,r=t===s?0:t<0?s-1:t,n=i[e];i[e]=i[r],i[r]=n};x.width=(i,e=80)=>{let t=i&&i.columns?i.columns:e;return i&&typeof i.getWindowSize=="function"&&(t=i.getWindowSize()[0]),process.platform==="win32"?t-1:t};x.height=(i,e=20)=>{let t=i&&i.rows?i.rows:e;return i&&typeof i.getWindowSize=="function"&&(t=i.getWindowSize()[1]),t};x.wordWrap=(i,e={})=>{if(!i)return i;typeof e=="number"&&(e={width:e});let{indent:t="",newline:s=`
`+t,width:r=80}=e,n=(s+t).match(/[^\S\n]/g)||[];r-=n.length;let l=`.{1,${r}}([\\s\\u200B]+|$)|[^\\s\\u200B]+?([\\s\\u200B]+|$)`,a=i.trim(),o=new RegExp(l,"g"),h=a.match(o)||[];return h=h.map(d=>d.replace(/\n$/,"")),e.padEnd&&(h=h.map(d=>d.padEnd(r," "))),e.padStart&&(h=h.map(d=>d.padStart(r," "))),t+h.join(s)};x.unmute=i=>{let e=i.stack.find(s=>D.keys.color.includes(s));return e?D[e]:i.stack.find(s=>s.slice(2)==="bg")?D[e.slice(2)]:s=>s};x.pascal=i=>i?i[0].toUpperCase()+i.slice(1):"";x.inverse=i=>{if(!i||!i.stack)return i;let e=i.stack.find(s=>D.keys.color.includes(s));if(e){let s=D["bg"+x.pascal(e)];return s?s.black:i}let t=i.stack.find(s=>s.slice(0,2)==="bg");return t?D[t.slice(2).toLowerCase()]||i:D.none};x.complement=i=>{if(!i||!i.stack)return i;let e=i.stack.find(s=>D.keys.color.includes(s)),t=i.stack.find(s=>s.slice(0,2)==="bg");if(e&&!t)return D[wt[e]||e];if(t){let s=t.slice(2).toLowerCase(),r=wt[s];return r&&D["bg"+x.pascal(r)]||i}return D.none};x.meridiem=i=>{let e=i.getHours(),t=i.getMinutes(),s=e>=12?"pm":"am";e=e%12;let r=e===0?12:e,n=t<10?"0"+t:t;return r+":"+n+" "+s};x.set=(i={},e="",t)=>e.split(".").reduce((s,r,n,l)=>{let a=l.length-1>n?s[r]||{}:t;return!x.isObject(a)&&n<l.length-1&&(a={}),s[r]=a},i);x.get=(i={},e="",t)=>{let s=i[e]==null?e.split(".").reduce((r,n)=>r&&r[n],i):i[e];return s??t};x.mixin=(i,e)=>{if(!ae(i))return e;if(!ae(e))return i;for(let t of Object.keys(e)){let s=Object.getOwnPropertyDescriptor(e,t);if(hasOwnProperty.call(s,"value"))if(hasOwnProperty.call(i,t)&&ae(s.value)){let r=Object.getOwnPropertyDescriptor(i,t);ae(r.value)&&r.value!==s.value?i[t]=x.merge({},i[t],e[t]):Reflect.defineProperty(i,t,s)}else Reflect.defineProperty(i,t,s);else Reflect.defineProperty(i,t,s)}return i};x.merge=(...i)=>{let e={};for(let t of i)x.mixin(e,t);return e};x.mixinEmitter=(i,e)=>{let t=e.constructor.prototype;for(let s of Object.keys(t)){let r=t[s];typeof r=="function"?x.define(i,s,r.bind(e)):x.define(i,s,r)}};var oe=(i,e)=>{bt||(bt=!0,ee.forEach(t=>t()),i===!0&&process.exit(128+e))},xt=oe.bind(null,!0,15),vt=oe.bind(null,!0,2);x.onExit=i=>(ee.size===0&&(process.once("SIGTERM",xt),process.once("SIGINT",vt),process.once("exit",oe)),ee.add(i),()=>{ee.delete(i),ee.size===0&&(process.off("SIGTERM",xt),process.off("SIGINT",vt),process.off("exit",oe))});x.define=(i,e,t)=>{Reflect.defineProperty(i,e,{value:t})};x.defineExport=(i,e,t)=>{let s;Reflect.defineProperty(i,e,{enumerable:!0,configurable:!0,set(r){s=r},get(){return s?s():t()}})}});var St=m((cn,Ct)=>{"use strict";u();Ct.exports=({onlyFirst:i=!1}={})=>{let e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,i?void 0:"g")}});var T=m((pn,qt)=>{"use strict";u();var Ps=St();qt.exports=i=>typeof i=="string"?i.replace(Ps(),""):i});var kt=m(W=>{"use strict";u();W.ctrl={a:"first",b:"backward",c:"cancel",d:"deleteForward",e:"last",f:"forward",g:"reset",i:"tab",k:"cutForward",l:"reset",n:"newItem",m:"cancel",j:"submit",p:"search",r:"remove",s:"save",u:"undo",w:"cutLeft",x:"toggleCursor",v:"paste"};W.shift={up:"shiftUp",down:"shiftDown",left:"shiftLeft",right:"shiftRight",tab:"prev"};W.fn={up:"pageUp",down:"pageDown",left:"pageLeft",right:"pageRight",delete:"deleteForward"};W.option={b:"backward",f:"forward",d:"cutRight",left:"cutLeft",up:"altUp",down:"altDown"};W.keys={pageup:"pageUp",pagedown:"pageDown",home:"home",end:"end",cancel:"cancel",delete:"deleteForward",backspace:"delete",down:"down",enter:"submit",escape:"cancel",left:"left",space:"space",number:"number",return:"submit",right:"right",tab:"next",up:"up"}});var Pt=m((bn,$t)=>{"use strict";u();$t.exports=class{_queue=[];_executing=!1;_jobRunner=null;constructor(e){this._jobRunner=e}enqueue=(...e)=>{this._queue.push(e),this._dequeue()};destroy(){this._queue.length=0,this._jobRunner=null}_dequeue(){this._executing||!this._queue.length||(this._executing=!0,this._jobRunner(...this._queue.shift()),setTimeout(()=>{this._executing=!1,this._dequeue()}))}}});var ye=m((xn,Et)=>{"use strict";u();var jt=ne("readline"),js=kt(),Es=Pt(),As=/^(?:\x1b)([a-zA-Z0-9])$/,Os=/^(?:\x1b+)(O|N|\[|\[\[)(?:(\d+)(?:;(\d+))?([~^$])|(?:1;)?(\d+)?([a-zA-Z]))/,Rs={OP:"f1",OQ:"f2",OR:"f3",OS:"f4","[11~":"f1","[12~":"f2","[13~":"f3","[14~":"f4","[[A":"f1","[[B":"f2","[[C":"f3","[[D":"f4","[[E":"f5","[15~":"f5","[17~":"f6","[18~":"f7","[19~":"f8","[20~":"f9","[21~":"f10","[23~":"f11","[24~":"f12","[A":"up","[B":"down","[C":"right","[D":"left","[E":"clear","[F":"end","[H":"home",OA:"up",OB:"down",OC:"right",OD:"left",OE:"clear",OF:"end",OH:"home","[1~":"home","[2~":"insert","[3~":"delete","[4~":"end","[5~":"pageup","[6~":"pagedown","[[5~":"pageup","[[6~":"pagedown","[7~":"home","[8~":"end","[a":"up","[b":"down","[c":"right","[d":"left","[e":"clear","[2$":"insert","[3$":"delete","[5$":"pageup","[6$":"pagedown","[7$":"home","[8$":"end",Oa:"up",Ob:"down",Oc:"right",Od:"left",Oe:"clear","[2^":"insert","[3^":"delete","[5^":"pageup","[6^":"pagedown","[7^":"home","[8^":"end","[Z":"tab"};function _s(i){return["[a","[b","[c","[d","[e","[2$","[3$","[5$","[6$","[7$","[8$","[Z"].includes(i)}function Ds(i){return["Oa","Ob","Oc","Od","Oe","[2^","[3^","[5^","[6^","[7^","[8^"].includes(i)}var he=(i="",e={})=>{let t,s={name:e.name,ctrl:!1,meta:!1,shift:!1,option:!1,sequence:i,raw:i,...e};if(Buffer.isBuffer(i)?i[0]>127&&i[1]===void 0?(i[0]-=128,i="\x1B"+String(i)):i=String(i):i!==void 0&&typeof i!="string"?i=String(i):i||(i=s.sequence||""),s.sequence=s.sequence||i||s.name,i==="\r")s.raw=void 0,s.name="return";else if(i===`
`)s.name="enter";else if(i==="	")s.name="tab";else if(i==="\b"||i==="\x7F"||i==="\x1B\x7F"||i==="\x1B\b")s.name="backspace",s.meta=i.charAt(0)==="\x1B";else if(i==="\x1B"||i==="\x1B\x1B")s.name="escape",s.meta=i.length===2;else if(i===" "||i==="\x1B ")s.name="space",s.meta=i.length===2;else if(i<="")s.name=String.fromCharCode(i.charCodeAt(0)+97-1),s.ctrl=!0;else if(i.length===1&&i>="0"&&i<="9")s.name="number";else if(i.length===1&&i>="a"&&i<="z")s.name=i;else if(i.length===1&&i>="A"&&i<="Z")s.name=i.toLowerCase(),s.shift=!0;else if(t=As.exec(i))s.meta=!0,s.shift=/^[A-Z]$/.test(t[1]);else if(t=Os.exec(i)){let r=[...i];r[0]==="\x1B"&&r[1]==="\x1B"&&(s.option=!0);let n=[t[1],t[2],t[4],t[6]].filter(Boolean).join(""),l=(t[3]||t[5]||1)-1;s.ctrl=!!(l&4),s.meta=!!(l&10),s.shift=!!(l&1),s.code=n,s.name=Rs[n],s.shift=_s(n)||s.shift,s.ctrl=Ds(n)||s.ctrl}return s};he.listen=(i={},e)=>{let{stdin:t}=i;if(!t||t!==process.stdin&&!t.isTTY)throw new Error("Invalid stream passed");let s=jt.createInterface({terminal:!0,input:t});jt.emitKeypressEvents(t,s);let r=new Es((a,o)=>e(a,he(a,o),s)),n=t.isRaw;return t.isTTY&&t.setRawMode(!0),t.on("keypress",r.enqueue),s.resume(),()=>{t.isTTY&&t.setRawMode(n),t.removeListener("keypress",r.enqueue),r.destroy(),s.pause(),s.close()}};he.action=(i,e,t)=>{let s={...js,...t};return e.ctrl?(e.action=s.ctrl[e.name],e):e.option&&s.option?(e.action=s.option[e.name],e):e.shift?(e.action=s.shift[e.name],e):(e.action=s.keys[e.name],e)};Et.exports=he});var Ot=m((Cn,At)=>{"use strict";u();At.exports=i=>{i.timers=i.timers||{};let e=i.options.timers;if(e)for(let t of Object.keys(e)){let s=e[t];typeof s=="number"&&(s={interval:s}),Bs(i,t,s)}};function Bs(i,e,t={}){let s=i.timers[e]={name:e,start:Date.now(),ms:0,tick:0},r=t.interval||120;s.frames=t.frames||[],s.loading=!0;let n=setInterval(()=>{s.ms=Date.now()-s.start,s.tick++,i.render()},r);return s.stop=()=>{s.loading=!1,clearInterval(n)},Reflect.defineProperty(s,"interval",{value:n}),i.once("close",()=>s.stop()),s.stop}});var _t=m((qn,Rt)=>{"use strict";u();var{define:Is,width:Ls}=E(),be=class{constructor(e){let t=e.options;Is(this,"_prompt",e),this.type=e.type,this.name=e.name,this.message="",this.header="",this.footer="",this.error="",this.hint="",this.input="",this.cursor=0,this.index=0,this.lines=0,this.tick=0,this.prompt="",this.buffer="",this.width=Ls(t.stdout||process.stdout),Object.assign(this,t),this.name=this.name||this.message,this.message=this.message||this.name,this.symbols=e.symbols,this.styles=e.styles,this.required=new Set,this.cancelled=!1,this.submitted=!1}clone(){let e={...this};return e.status=this.status,e.buffer=Buffer.from(e.buffer),delete e.clone,e}set color(e){this._color=e}get color(){let e=this.prompt.styles;if(this.cancelled)return e.cancelled;if(this.submitted)return e.submitted;let t=this._color||e[this.status];return typeof t=="function"?t:e.pending}set loading(e){this._loading=e}get loading(){return typeof this._loading=="boolean"?this._loading:this.loadingChoices?"choices":!1}get status(){return this.cancelled?"cancelled":this.submitted?"submitted":"pending"}};Rt.exports=be});var Bt=m(($n,Dt)=>{"use strict";u();var we=E(),j=le(),xe={default:j.noop,noop:j.noop,set inverse(i){this._inverse=i},get inverse(){return this._inverse||we.inverse(this.primary)},set complement(i){this._complement=i},get complement(){return this._complement||we.complement(this.primary)},primary:j.cyan,success:j.green,danger:j.magenta,strong:j.bold,warning:j.yellow,muted:j.dim,disabled:j.gray,dark:j.dim.gray,underline:j.underline,set info(i){this._info=i},get info(){return this._info||this.primary},set em(i){this._em=i},get em(){return this._em||this.primary.underline},set heading(i){this._heading=i},get heading(){return this._heading||this.muted.underline},set pending(i){this._pending=i},get pending(){return this._pending||this.primary},set submitted(i){this._submitted=i},get submitted(){return this._submitted||this.success},set cancelled(i){this._cancelled=i},get cancelled(){return this._cancelled||this.danger},set typing(i){this._typing=i},get typing(){return this._typing||this.dim},set placeholder(i){this._placeholder=i},get placeholder(){return this._placeholder||this.primary.dim},set highlight(i){this._highlight=i},get highlight(){return this._highlight||this.inverse}};xe.merge=(i={})=>{i.styles&&typeof i.styles.enabled=="boolean"&&(j.enabled=i.styles.enabled),i.styles&&typeof i.styles.visible=="boolean"&&(j.visible=i.styles.visible);let e=we.merge({},xe,i.styles);delete e.merge;for(let t of Object.keys(j))hasOwnProperty.call(e,t)||Reflect.defineProperty(e,t,{get:()=>j[t]});for(let t of Object.keys(j.styles))hasOwnProperty.call(e,t)||Reflect.defineProperty(e,t,{get:()=>j[t]});return e};Dt.exports=xe});var Lt=m((jn,It)=>{"use strict";u();var ve=process.platform==="win32",z=le(),zs=E(),Ce={...z.symbols,upDownDoubleArrow:"\u21D5",upDownDoubleArrow2:"\u2B0D",upDownArrow:"\u2195",asterisk:"*",asterism:"\u2042",bulletWhite:"\u25E6",electricArrow:"\u2301",ellipsisLarge:"\u22EF",ellipsisSmall:"\u2026",fullBlock:"\u2588",identicalTo:"\u2261",indicator:z.symbols.check,leftAngle:"\u2039",mark:"\u203B",minus:"\u2212",multiplication:"\xD7",obelus:"\xF7",percent:"%",pilcrow:"\xB6",pilcrow2:"\u2761",pencilUpRight:"\u2710",pencilDownRight:"\u270E",pencilRight:"\u270F",plus:"+",plusMinus:"\xB1",pointRight:"\u261E",rightAngle:"\u203A",section:"\xA7",hexagon:{off:"\u2B21",on:"\u2B22",disabled:"\u2B22"},ballot:{on:"\u2611",off:"\u2610",disabled:"\u2612"},stars:{on:"\u2605",off:"\u2606",disabled:"\u2606"},folder:{on:"\u25BC",off:"\u25B6",disabled:"\u25B6"},prefix:{pending:z.symbols.question,submitted:z.symbols.check,cancelled:z.symbols.cross},separator:{pending:z.symbols.pointerSmall,submitted:z.symbols.middot,cancelled:z.symbols.middot},radio:{off:ve?"( )":"\u25EF",on:ve?"(*)":"\u25C9",disabled:ve?"(|)":"\u24BE"},numbers:["\u24EA","\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246A","\u246B","\u246C","\u246D","\u246E","\u246F","\u2470","\u2471","\u2472","\u2473","\u3251","\u3252","\u3253","\u3254","\u3255","\u3256","\u3257","\u3258","\u3259","\u325A","\u325B","\u325C","\u325D","\u325E","\u325F","\u32B1","\u32B2","\u32B3","\u32B4","\u32B5","\u32B6","\u32B7","\u32B8","\u32B9","\u32BA","\u32BB","\u32BC","\u32BD","\u32BE","\u32BF"]};Ce.merge=i=>{let e=zs.merge({},z.symbols,Ce,i.symbols);return delete e.merge,e};It.exports=Ce});var Tt=m((An,zt)=>{"use strict";u();var Ts=Bt(),Ms=Lt(),Fs=E();zt.exports=i=>{i.options=Fs.merge({},i.options.theme,i.options),i.symbols=Ms.merge(i.options),i.styles=Ts.merge(i.options)}});var Ht=m((Ut,Nt)=>{"use strict";u();var Mt=process.env.TERM_PROGRAM==="Apple_Terminal",Us=T(),Se=E(),I=Nt.exports=Ut,q="\x1B[",Ft="\x07",qe=!1,M=I.code={bell:Ft,beep:Ft,beginning:`${q}G`,down:`${q}J`,esc:q,getPosition:`${q}6n`,hide:`${q}?25l`,line:`${q}2K`,lineEnd:`${q}K`,lineStart:`${q}1K`,restorePosition:q+(Mt?"8":"u"),savePosition:q+(Mt?"7":"s"),screen:`${q}2J`,show:`${q}?25h`,up:`${q}1J`},N=I.cursor={get hidden(){return qe},hide(){return qe=!0,M.hide},show(){return qe=!1,M.show},forward:(i=1)=>`${q}${i}C`,backward:(i=1)=>`${q}${i}D`,nextLine:(i=1)=>`${q}E`.repeat(i),prevLine:(i=1)=>`${q}F`.repeat(i),up:(i=1)=>i?`${q}${i}A`:"",down:(i=1)=>i?`${q}${i}B`:"",right:(i=1)=>i?`${q}${i}C`:"",left:(i=1)=>i?`${q}${i}D`:"",to(i,e){return e?`${q}${e+1};${i+1}H`:`${q}${i+1}G`},move(i=0,e=0){let t="";return t+=i<0?N.left(-i):i>0?N.right(i):"",t+=e<0?N.up(-e):e>0?N.down(e):"",t},strLen(i){for(var e=0,t=i.length,s=-1,r=0;r<t;r++)s=i.charCodeAt(r),s>=0&&s<=128?e+=1:e+=2;return e},restore(i={}){let{after:e,cursor:t,initial:s,input:r,prompt:n,size:l,value:a}=i;if(s=Se.isPrimitive(s)?String(s):"",r=Se.isPrimitive(r)?String(r):"",a=Se.isPrimitive(a)?String(a):"",l){let o=I.cursor.up(l)+I.cursor.to(this.strLen(n)),h=r.length-t;return h>0&&(o+=I.cursor.left(h)),o}if(a||e){let o=!r&&s?-this.strLen(s):-this.strLen(r)+t;return e&&(o-=this.strLen(e)),r===""&&s&&!n.includes(s)&&(o+=this.strLen(s)),I.cursor.move(o)}}},ke=I.erase={screen:M.screen,up:M.up,down:M.down,line:M.line,lineEnd:M.lineEnd,lineStart:M.lineStart,lines(i){let e="";for(let t=0;t<i;t++)e+=I.erase.line+(t<i-1?I.cursor.up(1):"");return i&&(e+=I.code.beginning),e}};I.clear=(i="",e=process.stdout.columns)=>{if(!e)return ke.line+N.to(0);let t=n=>[...Us(n)].length,s=i.split(/\r?\n/),r=0;for(let n of s)r+=1+Math.floor(Math.max(t(n)-1,0)/e);return(ke.line+N.prevLine()).repeat(r-1)+ke.line+N.to(0)}});var G=m((_n,Kt)=>{"use strict";u();var Ns=ne("events"),Vt=T(),$e=ye(),Hs=Ot(),Vs=_t(),Ks=Tt(),O=E(),H=Ht(),Pe=class i extends Ns{constructor(e={}){super(),this.name=e.name,this.type=e.type,this.options=e,Ks(this),Hs(this),this.state=new Vs(this),this.initial=[e.initial,e.default].find(t=>t!=null),this.stdout=e.stdout||process.stdout,this.stdin=e.stdin||process.stdin,this.scale=e.scale||1,this.term=this.options.term||process.env.TERM_PROGRAM,this.margin=Gs(this.options.margin),this.setMaxListeners(0),Ws(this)}async keypress(e,t={}){this.keypressed=!0;let s=$e.action(e,$e(e,t),this.options.actions);this.state.keypress=s,this.emit("keypress",e,s),this.emit("state",this.state.clone());let r=this.options[s.action]||this[s.action]||this.dispatch;if(typeof r=="function")return await r.call(this,e,s);this.alert()}alert(){delete this.state.alert,this.options.show===!1?this.emit("alert"):this.stdout.write(H.code.beep)}cursorHide(){this.stdout.write(H.cursor.hide());let e=O.onExit(()=>this.cursorShow());this.on("close",()=>{this.cursorShow(),e()})}cursorShow(){this.stdout.write(H.cursor.show())}write(e){e&&(this.stdout&&this.state.show!==!1&&this.stdout.write(e),this.state.buffer+=e)}clear(e=0){let t=this.state.buffer;this.state.buffer="",!(!t&&!e||this.options.show===!1)&&this.stdout.write(H.cursor.down(e)+H.clear(t,this.width))}restore(){if(this.state.closed||this.options.show===!1)return;let{prompt:e,after:t,rest:s}=this.sections(),{cursor:r,initial:n="",input:l="",value:a=""}=this,o=this.state.size=s.length,h={after:t,cursor:r,initial:n,input:l,prompt:e,size:o,value:a},d=H.cursor.restore(h);d&&this.stdout.write(d)}sections(){let{buffer:e,input:t,prompt:s}=this.state;s=Vt(s);let r=Vt(e),n=r.indexOf(s),l=r.slice(0,n),o=r.slice(n).split(`
`),h=o[0],d=o[o.length-1],S=(s+(t?" "+t:"")).length,w=S<h.length?h.slice(S+1):"";return{header:l,prompt:h,after:w,rest:o.slice(1),last:d}}async submit(){this.state.submitted=!0,this.state.validating=!0,this.options.onSubmit&&await this.options.onSubmit.call(this,this.name,this.value,this);let e=this.state.error||await this.validate(this.value,this.state);if(e!==!0){let t=`
`+this.symbols.pointer+" ";typeof e=="string"?t+=e.trim():t+="Invalid input",this.state.error=`
`+this.styles.danger(t),this.state.submitted=!1,await this.render(),await this.alert(),this.state.validating=!1,this.state.error=void 0;return}this.state.validating=!1,await this.render(),await this.close(),this.value=await this.result(this.value),this.emit("submit",this.value)}async cancel(e){this.state.cancelled=this.state.submitted=!0,await this.render(),await this.close(),typeof this.options.onCancel=="function"&&await this.options.onCancel.call(this,this.name,this.value,this),this.emit("cancel",await this.error(e))}async close(){this.state.closed=!0;try{let e=this.sections(),t=Math.ceil(e.prompt.length/this.width);e.rest&&this.write(H.cursor.down(e.rest.length)),this.write(`
`.repeat(t))}catch{}this.emit("close")}start(){!this.stop&&this.options.show!==!1&&(this.stop=$e.listen(this,this.keypress.bind(this)),this.once("close",this.stop),this.emit("start",this))}async skip(){return this.skipped=this.options.skip===!0,typeof this.options.skip=="function"&&(this.skipped=await this.options.skip.call(this,this.name,this.value)),this.skipped}async initialize(){let{format:e,options:t,result:s}=this;if(this.format=()=>e.call(this,this.value),this.result=()=>s.call(this,this.value),typeof t.initial=="function"&&(this.initial=await t.initial.call(this,this)),typeof t.onRun=="function"&&await t.onRun.call(this,this),typeof t.onSubmit=="function"){let r=t.onSubmit.bind(this),n=this.submit.bind(this);delete this.options.onSubmit,this.submit=async()=>(await r(this.name,this.value,this),n())}await this.start(),await this.render()}render(){throw new Error("expected prompt to have a custom render method")}run(){return new Promise(async(e,t)=>{if(this.once("submit",e),this.once("cancel",t),await this.skip())return this.render=()=>{},this.submit();await this.initialize(),this.emit("run")})}async element(e,t,s){let{options:r,state:n,symbols:l,timers:a}=this,o=a&&a[e];n.timer=o;let h=r[e]||n[e]||l[e],d=t&&t[e]!=null?t[e]:await h;if(d==="")return d;let c=await this.resolve(d,n,t,s);return!c&&t&&t[e]?this.resolve(h,n,t,s):c}async prefix(){let e=await this.element("prefix")||this.symbols,t=this.timers&&this.timers.prefix,s=this.state;return s.timer=t,O.isObject(e)&&(e=e[s.status]||e.pending),O.hasColor(e)?e:(this.styles[s.status]||this.styles.pending)(e)}async message(){let e=await this.element("message");return O.hasColor(e)?e:this.styles.strong(e)}async separator(){let e=await this.element("separator")||this.symbols,t=this.timers&&this.timers.separator,s=this.state;s.timer=t;let r=e[s.status]||e.pending||s.separator,n=await this.resolve(r,s);return O.isObject(n)&&(n=n[s.status]||n.pending),O.hasColor(n)?n:this.styles.muted(n)}async pointer(e,t){let s=await this.element("pointer",e,t);if(typeof s=="string"&&O.hasColor(s))return s;if(s){let r=this.styles,n=this.index===t,l=n?r.primary:h=>h,a=await this.resolve(s[n?"on":"off"]||s,this.state),o=O.hasColor(a)?a:l(a);return n?o:" ".repeat(a.length)}}async indicator(e,t){let s=await this.element("indicator",e,t);if(typeof s=="string"&&O.hasColor(s))return s;if(s){let r=this.styles,n=e.enabled===!0,l=n?r.success:r.dark,a=s[n?"on":"off"]||s;return O.hasColor(a)?a:l(a)}return""}body(){return null}footer(){if(this.state.status==="pending")return this.element("footer")}header(){if(this.state.status==="pending")return this.element("header")}async hint(){if(this.state.status==="pending"&&!this.isValue(this.state.input)){let e=await this.element("hint");return O.hasColor(e)?e:this.styles.muted(e)}}error(e){return this.state.submitted?"":e||this.state.error}format(e){return e}result(e){return e}validate(e){return this.options.required===!0?this.isValue(e):!0}isValue(e){return e!=null&&e!==""}resolve(e,...t){return O.resolve(this,e,...t)}get base(){return i.prototype}get style(){return this.styles[this.state.status]}get height(){return this.options.rows||O.height(this.stdout,25)}get width(){return this.options.columns||O.width(this.stdout,80)}get size(){return{width:this.width,height:this.height}}set cursor(e){this.state.cursor=e}get cursor(){return this.state.cursor}set input(e){this.state.input=e}get input(){return this.state.input}set value(e){this.state.value=e}get value(){let{input:e,value:t}=this.state,s=[t,e].find(this.isValue.bind(this));return this.isValue(s)?s:this.initial}static get prompt(){return e=>new this(e).run()}};function Ws(i){let e=r=>i[r]===void 0||typeof i[r]=="function",t=["actions","choices","initial","margin","roles","styles","symbols","theme","timers","value"],s=["body","footer","error","header","hint","indicator","message","prefix","separator","skip"];for(let r of Object.keys(i.options)){if(t.includes(r)||/^on[A-Z]/.test(r))continue;let n=i.options[r];typeof n=="function"&&e(r)?s.includes(r)||(i[r]=n.bind(i)):typeof i[r]!="function"&&(i[r]=n)}}function Gs(i){typeof i=="number"&&(i=[i,i,i,i]);let e=[].concat(i||[]),t=r=>r%2===0?`
`:" ",s=[];for(let r=0;r<4;r++){let n=t(r);e[r]?s.push(n.repeat(e[r])):s.push("")}return s}Kt.exports=Pe});var Zt=m((Bn,Gt)=>{"use strict";u();var Zs=E(),Wt={default(i,e){return e},checkbox(i,e){throw new Error("checkbox role is not implemented yet")},editable(i,e){throw new Error("editable role is not implemented yet")},expandable(i,e){throw new Error("expandable role is not implemented yet")},heading(i,e){return e.disabled="",e.indicator=[e.indicator," "].find(t=>t!=null),e.message=e.message||"",e},input(i,e){throw new Error("input role is not implemented yet")},option(i,e){return Wt.default(i,e)},radio(i,e){throw new Error("radio role is not implemented yet")},separator(i,e){return e.disabled="",e.indicator=[e.indicator," "].find(t=>t!=null),e.message=e.message||i.symbols.line.repeat(5),e},spacer(i,e){return e}};Gt.exports=(i,e={})=>{let t=Zs.merge({},Wt,e.roles);return t[i]||t.default}});var te=m((Ln,Qt)=>{"use strict";u();var Ys=T(),Js=G(),Qs=Zt(),ue=E(),{reorder:je,scrollUp:Xs,scrollDown:er,isObject:Yt,swap:tr}=ue,Ee=class extends Js{constructor(e){super(e),this.cursorHide(),this.maxSelected=e.maxSelected||1/0,this.multiple=e.multiple||!1,this.initial=e.initial||0,this.delay=e.delay||0,this.longest=0,this.num=""}async initialize(){typeof this.options.initial=="function"&&(this.initial=await this.options.initial.call(this)),await this.reset(!0),await super.initialize()}async reset(){let{choices:e,initial:t,autofocus:s,suggest:r}=this.options;if(this.state._choices=[],this.state.choices=[],this.choices=await Promise.all(await this.toChoices(e)),this.choices.forEach(n=>n.enabled=!1),typeof r!="function"&&this.selectable.length===0)throw new Error("At least one choice must be selectable");Yt(t)&&(t=Object.keys(t)),Array.isArray(t)?(s!=null&&(this.index=this.findIndex(s)),t.forEach(n=>this.enable(this.find(n))),await this.render()):(s!=null&&(t=s),typeof t=="string"&&(t=this.findIndex(t)),typeof t=="number"&&t>-1&&(this.index=Math.max(0,Math.min(t,this.choices.length)),this.enable(this.find(this.index)))),this.isDisabled(this.focused)&&await this.down()}async toChoices(e,t){this.state.loadingChoices=!0;let s=[],r=0,n=async(l,a)=>{typeof l=="function"&&(l=await l.call(this)),l instanceof Promise&&(l=await l);for(let o=0;o<l.length;o++){let h=l[o]=await this.toChoice(l[o],r++,a);s.push(h),h.choices&&await n(h.choices,h)}return s};return n(e,t).then(l=>(this.state.loadingChoices=!1,l))}async toChoice(e,t,s){if(typeof e=="function"&&(e=await e.call(this,this)),e instanceof Promise&&(e=await e),typeof e=="string"&&(e={name:e}),e.normalized)return e;e.normalized=!0;let r=e.value;if(e=Qs(e.role,this.options)(this,e),typeof e.disabled=="string"&&!e.hint&&(e.hint=e.disabled,e.disabled=!0),e.disabled===!0&&e.hint==null&&(e.hint="(disabled)"),e.index!=null)return e;e.name=e.name||e.key||e.title||e.value||e.message,e.message=e.message||e.name||"",e.value=[e.value,e.name].find(this.isValue.bind(this)),e.input="",e.index=t,e.cursor=0,ue.define(e,"parent",s),e.level=s?s.level+1:1,e.indent==null&&(e.indent=s?s.indent+"  ":e.indent||""),e.path=s?s.path+"."+e.name:e.name,e.enabled=!!(this.multiple&&!this.isDisabled(e)&&(e.enabled||this.isSelected(e))),this.isDisabled(e)||(this.longest=Math.max(this.longest,Ys(e.message).length));let l={...e};return e.reset=(a=l.input,o=l.value)=>{for(let h of Object.keys(l))e[h]=l[h];e.input=a,e.value=o},r==null&&typeof e.initial=="function"&&(e.input=await e.initial.call(this,this.state,e,t)),e}async onChoice(e,t){this.emit("choice",e,t,this),typeof e.onChoice=="function"&&await e.onChoice.call(this,this.state,e,t)}async addChoice(e,t,s){let r=await this.toChoice(e,t,s);return this.choices.push(r),this.index=this.choices.length-1,this.limit=this.choices.length,r}async newItem(e,t,s){let r={name:"New choice name?",editable:!0,newChoice:!0,...e},n=await this.addChoice(r,t,s);return n.updateChoice=()=>{delete n.newChoice,n.name=n.message=n.input,n.input="",n.cursor=0},this.render()}indent(e){return e.indent==null?e.level>1?"  ".repeat(e.level-1):"":e.indent}dispatch(e,t){if(this.multiple&&this[t.name])return this[t.name]();this.alert()}focus(e,t){return typeof t!="boolean"&&(t=e.enabled),t&&!e.enabled&&this.selected.length>=this.maxSelected?this.alert():(this.index=e.index,e.enabled=t&&!this.isDisabled(e),e)}space(){if(!this.multiple)return this.alert();if(this.focused)return this.toggle(this.focused),this.render()}a(){if(this.maxSelected<this.choices.length)return this.alert();let e=this.selectable.every(t=>t.enabled);return this.choices.forEach(t=>t.enabled=!e),this.render()}i(){return this.choices.length-this.selected.length>this.maxSelected?this.alert():(this.choices.forEach(e=>e.enabled=!e.enabled),this.render())}g(){if(!this.choices.some(t=>!!t.parent))return this.a();let e=this.focused;return this.toggle(e.parent&&!e.choices?e.parent:e),this.render()}toggle(e,t){if(!e.enabled&&this.selected.length>=this.maxSelected)return this.alert();typeof t!="boolean"&&(t=!e.enabled),e.enabled=t,e.choices&&e.choices.forEach(r=>this.toggle(r,t));let s=e.parent;for(;s;){let r=s.choices.filter(n=>this.isDisabled(n));s.enabled=r.every(n=>n.enabled===!0),s=s.parent}return Jt(this,this.choices),this.emit("toggle",e,this),e}enable(e){return this.selected.length>=this.maxSelected?this.alert():(e.enabled=!this.isDisabled(e),e.choices&&e.choices.forEach(this.enable.bind(this)),e)}disable(e){return e.enabled=!1,e.choices&&e.choices.forEach(this.disable.bind(this)),e}number(e){this.num+=e;let t=s=>{let r=Number(s);if(r>this.choices.length-1)return this.alert();let n=this.focused,l=this.choices.find(a=>r===a.index);if(!l.enabled&&this.selected.length>=this.maxSelected)return this.alert();if(this.visible.indexOf(l)===-1){let a=je(this.choices),o=a.indexOf(l);if(n.index>o){let h=a.slice(o,o+this.limit),d=a.filter(c=>!h.includes(c));this.choices=h.concat(d)}else{let h=o-this.limit+1;this.choices=a.slice(h).concat(a.slice(0,h))}}return this.index=this.choices.indexOf(l),this.toggle(this.focused),this.render()};return clearTimeout(this.numberTimeout),new Promise(s=>{let r=this.choices.length,n=this.num,l=(a=!1,o)=>{clearTimeout(this.numberTimeout),a&&(o=t(n)),this.num="",s(o)};if(n==="0"||n.length===1&&+(n+"0")>r)return l(!0);if(Number(n)>r)return l(!1,this.alert());this.numberTimeout=setTimeout(()=>l(!0),this.delay)})}home(){return this.choices=je(this.choices),this.index=0,this.render()}end(){let e=this.choices.length-this.limit,t=je(this.choices);return this.choices=t.slice(e).concat(t.slice(0,e)),this.index=this.limit-1,this.render()}first(){return this.index=0,this.render()}last(){return this.index=this.visible.length-1,this.render()}prev(){return this.visible.length<=1?this.alert():this.up()}next(){return this.visible.length<=1?this.alert():this.down()}right(){return this.cursor>=this.input.length?this.alert():(this.cursor++,this.render())}left(){return this.cursor<=0?this.alert():(this.cursor--,this.render())}up(){let e=this.choices.length,t=this.visible.length,s=this.index;return this.options.scroll===!1&&s===0?this.alert():e>t&&s===0?this.scrollUp():(this.index=(s-1%e+e)%e,this.isDisabled()&&!this.allChoicesAreDisabled()?this.up():this.render())}down(){let e=this.choices.length,t=this.visible.length,s=this.index;return this.options.scroll===!1&&s===t-1?this.alert():e>t&&s===t-1?this.scrollDown():(this.index=(s+1)%e,this.isDisabled()&&!this.allChoicesAreDisabled()?this.down():this.render())}scrollUp(e=0){return this.choices=Xs(this.choices),this.index=e,this.isDisabled()?this.up():this.render()}scrollDown(e=this.visible.length-1){return this.choices=er(this.choices),this.index=e,this.isDisabled()?this.down():this.render()}async shiftUp(){if(this.options.sort===!0){this.sorting=!0,this.swap(this.index-1),await this.up(),this.sorting=!1;return}return this.scrollUp(this.index)}async shiftDown(){if(this.options.sort===!0){this.sorting=!0,this.swap(this.index+1),await this.down(),this.sorting=!1;return}return this.scrollDown(this.index)}pageUp(){return this.visible.length<=1?this.alert():(this.limit=Math.max(this.limit-1,0),this.index=Math.min(this.limit-1,this.index),this._limit=this.limit,this.isDisabled()?this.up():this.render())}pageDown(){return this.visible.length>=this.choices.length?this.alert():(this.index=Math.max(0,this.index),this.limit=Math.min(this.limit+1,this.choices.length),this._limit=this.limit,this.isDisabled()?this.down():this.render())}swap(e){tr(this.choices,this.index,e)}allChoicesAreDisabled(e=this.choices){return e.every(t=>this.isDisabled(t))}isDisabled(e=this.focused){return e&&["disabled","collapsed","hidden","completing","readonly"].some(s=>e[s]===!0)?!0:e&&e.role==="heading"}isEnabled(e=this.focused){if(Array.isArray(e))return e.every(t=>this.isEnabled(t));if(e.choices){let t=e.choices.filter(s=>!this.isDisabled(s));return e.enabled&&t.every(s=>this.isEnabled(s))}return e.enabled&&!this.isDisabled(e)}isChoice(e,t){return e.name===t||e.index===Number(t)}isSelected(e){return Array.isArray(this.initial)?this.initial.some(t=>this.isChoice(e,t)):this.isChoice(e,this.initial)}map(e=[],t="value"){return[].concat(e||[]).reduce((s,r)=>(s[r]=this.find(r,t),s),{})}filter(e,t){let r=typeof e=="function"?e:(a,o)=>[a.name,o].includes(e),l=(this.options.multiple?this.state._choices:this.choices).filter(r);return t?l.map(a=>a[t]):l}find(e,t){if(Yt(e))return t?e[t]:e;let r=typeof e=="function"?e:(l,a)=>[l.name,a].includes(e),n=this.choices.find(r);if(n)return t?n[t]:n}findIndex(e){return this.choices.indexOf(this.find(e))}async submit(){let e=this.focused;if(!e)return this.alert();if(e.newChoice)return e.input?(e.updateChoice(),this.render()):this.alert();if(this.choices.some(l=>l.newChoice))return this.alert();let{reorder:t,sort:s}=this.options,r=this.multiple===!0,n=this.selected;return n===void 0?this.alert():(Array.isArray(n)&&t!==!1&&s!==!0&&(n=ue.reorder(n)),this.value=r?n.map(l=>l.name):n.name,super.submit())}set choices(e=[]){this.state._choices=this.state._choices||[],this.state.choices=e;for(let t of e)this.state._choices.some(s=>s.name===t.name)||this.state._choices.push(t);if(!this._initial&&this.options.initial){this._initial=!0;let t=this.initial;if(typeof t=="string"||typeof t=="number"){let s=this.find(t);s&&(this.initial=s.index,this.focus(s,!0))}}}get choices(){return Jt(this,this.state.choices||[])}set visible(e){this.state.visible=e}get visible(){return(this.state.visible||this.choices).slice(0,this.limit)}set limit(e){this.state.limit=e}get limit(){let{state:e,options:t,choices:s}=this,r=e.limit||this._limit||t.limit||s.length;return Math.min(r,this.height)}set value(e){super.value=e}get value(){return typeof super.value!="string"&&super.value===this.initial?this.input:super.value}set index(e){this.state.index=e}get index(){return Math.max(0,this.state?this.state.index:0)}get enabled(){return this.filter(this.isEnabled.bind(this))}get focused(){let e=this.choices[this.index];return e&&this.state.submitted&&this.multiple!==!0&&(e.enabled=!0),e}get selectable(){return this.choices.filter(e=>!this.isDisabled(e))}get selected(){return this.multiple?this.enabled:this.focused}};function Jt(i,e){if(e instanceof Promise)return e;if(typeof e=="function"){if(ue.isAsyncFn(e))return e;e=e.call(i,i)}for(let t of e){if(Array.isArray(t.choices)){let s=t.choices.filter(r=>!i.isDisabled(r));t.enabled=s.every(r=>r.enabled===!0)}i.isDisabled(t)===!0&&delete t.enabled}return e}Qt.exports=Ee});var F=m((Tn,Xt)=>{"use strict";u();var ir=te(),Ae=E(),Oe=class extends ir{constructor(e){super(e),this.emptyError=this.options.emptyError||"No items were selected"}async dispatch(e,t){if(this.multiple)return this[t.name]?await this[t.name](e,t):await super.dispatch(e,t);this.alert()}separator(){if(this.options.separator)return super.separator();let e=this.styles.muted(this.symbols.ellipsis);return this.state.submitted?super.separator():e}pointer(e,t){return!this.multiple||this.options.pointer?super.pointer(e,t):""}indicator(e,t){return this.multiple?super.indicator(e,t):""}choiceMessage(e,t){let s=this.resolve(e.message,this.state,e,t);return e.role==="heading"&&!Ae.hasColor(s)&&(s=this.styles.strong(s)),this.resolve(s,this.state,e,t)}choiceSeparator(){return":"}async renderChoice(e,t){await this.onChoice(e,t);let s=this.index===t,r=await this.pointer(e,t),n=await this.indicator(e,t)+(e.pad||""),l=await this.resolve(e.hint,this.state,e,t);l&&!Ae.hasColor(l)&&(l=this.styles.muted(l));let a=this.indent(e),o=await this.choiceMessage(e,t),h=()=>[this.margin[3],a+r+n,o,this.margin[1],l].filter(Boolean).join(" ");return e.role==="heading"?h():e.disabled?(Ae.hasColor(o)||(o=this.styles.disabled(o)),h()):(s&&(o=this.styles.em(o)),h())}async renderChoices(){if(this.state.loading==="choices")return this.styles.warning("Loading choices");if(this.state.submitted)return"";let e=this.visible.map(async(n,l)=>await this.renderChoice(n,l)),t=await Promise.all(e);t.length||t.push(this.styles.danger("No matching choices"));let s=this.margin[0]+t.join(`
`),r;return this.options.choicesHeader&&(r=await this.resolve(this.options.choicesHeader,this.state)),[r,s].filter(Boolean).join(`
`)}format(){return!this.state.submitted||this.state.cancelled?"":Array.isArray(this.selected)?this.selected.map(e=>this.styles.primary(e.name)).join(", "):this.styles.primary(this.selected.name)}async render(){let{submitted:e,size:t}=this.state,s="",r=await this.header(),n=await this.prefix(),l=await this.separator(),a=await this.message();this.options.promptLine!==!1&&(s=[n,a,l,""].join(" "),this.state.prompt=s);let o=await this.format(),h=await this.error()||await this.hint(),d=await this.renderChoices(),c=await this.footer();o&&(s+=o),h&&!s.includes(h)&&(s+=" "+h),e&&!o&&!d.trim()&&this.multiple&&this.emptyError!=null&&(s+=this.styles.danger(this.emptyError)),this.clear(t),this.write([r,s,d,c].filter(Boolean).join(`
`)),this.write(this.margin[2]),this.restore()}};Xt.exports=Oe});var ti=m((Fn,ei)=>{"use strict";u();var sr=F(),rr=(i,e)=>{let t=i?new RegExp(i,"ig"):/$^/;return s=>i?s.replace(t,r=>e(r)):s},Re=class extends sr{constructor(e){super(e),this.cursorShow()}moveCursor(e){this.state.cursor+=e}dispatch(e){return this.append(e)}space(e){return this.options.multiple?super.space(e):this.append(e)}append(e){let{cursor:t,input:s}=this.state;return this.input=s.slice(0,t)+e+s.slice(t),this.moveCursor(1),this.complete()}delete(){let{cursor:e,input:t}=this.state;return t?(this.input=t.slice(0,e-1)+t.slice(e),this.moveCursor(-1),this.complete()):this.alert()}deleteForward(){let{cursor:e,input:t}=this.state;return t[e]===void 0?this.alert():(this.input=`${t}`.slice(0,e)+`${t}`.slice(e+1),this.complete())}number(e){return this.append(e)}async complete(){this.completing=!0,this.choices=await this.suggest(this.input,this.state._choices),this.state.limit=void 0,this.index=Math.min(Math.max(this.visible.length-1,0),this.index),await this.render(),this.completing=!1}suggest(e=this.input,t=this.state._choices){if(typeof this.options.suggest=="function")return this.options.suggest.call(this,e,t);let s=e.toLowerCase();return t.filter(r=>r.message.toLowerCase().includes(s))}pointer(){return""}format(){if(!this.focused)return this.input;if(this.options.multiple&&this.state.submitted)return this.selected.map(e=>this.styles.primary(e.message)).join(", ");if(this.state.submitted){let e=this.value=this.input=this.focused.value;return this.styles.primary(e)}return this.input}async render(){if(this.state.status!=="pending")return super.render();let e=this.options.highlight||this.styles.complement,t=(n,l)=>n&&(e.stack?e(n):e.call(this,n)),s=rr(this.input,t),r=this.choices;this.choices=r.map(n=>({...n,message:s(n.message)})),await super.render(),this.choices=r}submit(){return this.options.multiple&&(this.value=this.selected.map(e=>e.name)),super.submit()}};ei.exports=Re});var De=m((Nn,ii)=>{"use strict";u();var _e=E();ii.exports=(i,e={})=>{i.cursorHide();let{input:t="",initial:s="",pos:r,showCursor:n=!0,color:l}=e,a=l||i.styles.placeholder,o=_e.inverse(i.styles.primary),h=C=>o(i.styles.black(C)),d=t,c=" ",S=h(c);if(i.blink&&i.blink.off===!0&&(h=C=>C,S=""),n&&r===0&&s===""&&t==="")return h(c);if(n&&r===0&&(t===s||t===""))return h(s[0])+a(s.slice(1));s=_e.isPrimitive(s)?`${s}`:"",t=_e.isPrimitive(t)?`${t}`:"";let w=s&&s.startsWith(t)&&s!==t,g=w?h(s[t.length]):S;if(r!==t.length&&n===!0&&(d=t.slice(0,r)+h(t[r])+t.slice(r+1),g=""),n===!1&&(g=""),w){let C=i.styles.unstyle(d+g);return d+g+a(s.slice(C.length))}return d+g}});var ce=m((Vn,si)=>{"use strict";u();var nr=T(),lr=F(),ar=De(),Be=class extends lr{constructor(e){super({...e,multiple:!0}),this.type="form",this.initial=this.options.initial,this.align=[this.options.align,"right"].find(t=>t!=null),this.emptyError="",this.values={}}async reset(e){return await super.reset(),e===!0&&(this._index=this.index),this.index=this._index,this.values={},this.choices.forEach(t=>t.reset&&t.reset()),this.render()}dispatch(e){return!!e&&this.append(e)}append(e){let t=this.focused;if(!t)return this.alert();let{cursor:s,input:r}=t;return t.value=t.input=r.slice(0,s)+e+r.slice(s),t.cursor++,this.render()}delete(){let e=this.focused;if(!e||e.cursor<=0)return this.alert();let{cursor:t,input:s}=e;return e.value=e.input=s.slice(0,t-1)+s.slice(t),e.cursor--,this.render()}deleteForward(){let e=this.focused;if(!e)return this.alert();let{cursor:t,input:s}=e;if(s[t]===void 0)return this.alert();let r=`${s}`.slice(0,t)+`${s}`.slice(t+1);return e.value=e.input=r,this.render()}right(){let e=this.focused;return e?e.cursor>=e.input.length?this.alert():(e.cursor++,this.render()):this.alert()}left(){let e=this.focused;return e?e.cursor<=0?this.alert():(e.cursor--,this.render()):this.alert()}space(e,t){return this.dispatch(e,t)}number(e,t){return this.dispatch(e,t)}next(){let e=this.focused;if(!e)return this.alert();let{initial:t,input:s}=e;return t&&t.startsWith(s)&&s!==t?(e.value=e.input=t,e.cursor=e.value.length,this.render()):super.next()}prev(){let e=this.focused;return e?e.cursor===0?super.prev():(e.value=e.input="",e.cursor=0,this.render()):this.alert()}separator(){return""}format(e){return this.state.submitted?"":super.format(e)}pointer(){return""}indicator(e){return e.input?"\u29BF":"\u2299"}async choiceSeparator(e,t){let s=await this.resolve(e.separator,this.state,e,t)||":";return s?" "+this.styles.disabled(s):""}async renderChoice(e,t){await this.onChoice(e,t);let{state:s,styles:r}=this,{cursor:n,initial:l="",name:a,input:o=""}=e,{muted:h,submitted:d,primary:c,danger:S}=r,w=this.index===t,g=e.validate||(()=>!0),C=await this.choiceSeparator(e,t),$=e.message;this.align==="right"&&($=$.padStart(this.longest+1," ")),this.align==="left"&&($=$.padEnd(this.longest+1," "));let y=this.values[a]=o||l,v=o?"success":"dark";await g.call(e,y,this.state)!==!0&&(v="danger");let b=r[v],k=b(await this.indicator(e,t))+(e.pad||""),A=this.indent(e),R=()=>[A,k,$+C,o].filter(Boolean).join(" ");if(s.submitted)return $=nr($),o=d(o),R();if(e.format)o=await e.format.call(this,o,e,t);else{let ct=this.styles.muted;o=ar(this,{input:o,initial:l,pos:n,showCursor:w,color:ct})}return this.isValue(o)||(o=this.styles.muted(this.symbols.ellipsis)),e.result&&(this.values[a]=await e.result.call(this,y,e,t)),w&&($=c($)),e.error?o+=(o?" ":"")+S(e.error.trim()):e.hint&&(o+=(o?" ":"")+h(e.hint.trim())),R()}async submit(){return this.value=this.values,super.base.submit.call(this)}};si.exports=Be});var Ie=m((Wn,ni)=>{"use strict";u();var or=ce(),hr=()=>{throw new Error("expected prompt to have a custom authenticate method")},ri=(i=hr)=>{class e extends or{constructor(s){super(s)}async submit(){this.value=await i.call(this,this.values,this.state),super.base.submit.call(this)}static create(s){return ri(s)}}return e};ni.exports=ri()});var oi=m((Zn,ai)=>{"use strict";u();var ur=Ie();function cr(i,e){return i.username===this.options.username&&i.password===this.options.password}var li=(i=cr)=>{let e=[{name:"username",message:"username"},{name:"password",message:"password",format(s){return this.options.showPassword?s:(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(s.length))}}];class t extends ur.create(i){constructor(r){super({...r,choices:e})}static create(r){return li(r)}}return t};ai.exports=li()});var de=m((Jn,hi)=>{"use strict";u();var dr=G(),{isPrimitive:pr,hasColor:fr}=E(),Le=class extends dr{constructor(e){super(e),this.cursorHide()}async initialize(){let e=await this.resolve(this.initial,this.state);this.input=await this.cast(e),await super.initialize()}dispatch(e){return this.isValue(e)?(this.input=e,this.submit()):this.alert()}format(e){let{styles:t,state:s}=this;return s.submitted?t.success(e):t.primary(e)}cast(e){return this.isTrue(e)}isTrue(e){return/^[ty1]/i.test(e)}isFalse(e){return/^[fn0]/i.test(e)}isValue(e){return pr(e)&&(this.isTrue(e)||this.isFalse(e))}async hint(){if(this.state.status==="pending"){let e=await this.element("hint");return fr(e)?e:this.styles.muted(e)}}async render(){let{input:e,size:t}=this.state,s=await this.prefix(),r=await this.separator(),n=await this.message(),l=this.styles.muted(this.default),a=[s,n,l,r].filter(Boolean).join(" ");this.state.prompt=a;let o=await this.header(),h=this.value=this.cast(e),d=await this.format(h),c=await this.error()||await this.hint(),S=await this.footer();c&&!a.includes(c)&&(d+=" "+c),a+=" "+d,this.clear(t),this.write([o,a,S].filter(Boolean).join(`
`)),this.restore()}set value(e){super.value=e}get value(){return this.cast(super.value)}};hi.exports=Le});var ci=m((Xn,ui)=>{"use strict";u();var mr=de(),ze=class extends mr{constructor(e){super(e),this.default=this.options.default||(this.initial?"(Y/n)":"(y/N)")}};ui.exports=ze});var pi=m((tl,di)=>{"use strict";u();var gr=F(),yr=ce(),Z=yr.prototype,Te=class extends gr{constructor(e){super({...e,multiple:!0}),this.align=[this.options.align,"left"].find(t=>t!=null),this.emptyError="",this.values={}}dispatch(e,t){let s=this.focused,r=s.parent||{};return!s.editable&&!r.editable&&(e==="a"||e==="i")?super[e]():Z.dispatch.call(this,e,t)}append(e,t){return Z.append.call(this,e,t)}delete(e,t){return Z.delete.call(this,e,t)}space(e){return this.focused.editable?this.append(e):super.space()}number(e){return this.focused.editable?this.append(e):super.number(e)}next(){return this.focused.editable?Z.next.call(this):super.next()}prev(){return this.focused.editable?Z.prev.call(this):super.prev()}async indicator(e,t){let s=e.indicator||"",r=e.editable?s:super.indicator(e,t);return await this.resolve(r,this.state,e,t)||""}indent(e){return e.role==="heading"?"":e.editable?" ":"  "}async renderChoice(e,t){return e.indent="",e.editable?Z.renderChoice.call(this,e,t):super.renderChoice(e,t)}error(){return""}footer(){return this.state.error}async validate(){let e=!0;for(let t of this.choices){if(typeof t.validate!="function"||t.role==="heading")continue;let s=t.parent?this.value[t.parent.name]:this.value;if(t.editable?s=t.value===t.name?t.initial||"":t.value:this.isDisabled(t)||(s=t.enabled===!0),e=await t.validate(s,this.state),e!==!0)break}return e!==!0&&(this.state.error=typeof e=="string"?e:"Invalid Input"),e}submit(){if(this.focused.newChoice===!0)return super.submit();if(this.choices.some(e=>e.newChoice))return this.alert();this.value={};for(let e of this.choices){let t=e.parent?this.value[e.parent.name]:this.value;if(e.role==="heading"){this.value[e.name]={};continue}e.editable?t[e.name]=e.value===e.name?e.initial||"":e.value:this.isDisabled(e)||(t[e.name]=e.enabled===!0)}return this.base.submit.call(this)}};di.exports=Te});var V=m((sl,fi)=>{"use strict";u();var br=G(),wr=ye(),xr=De(),{isPrimitive:vr}=E(),Me=class extends br{constructor(e){super(e),this.initial=vr(this.initial)?String(this.initial):"",this.initial&&this.cursorHide(),this.state.prevCursor=0,this.state.clipboard=[],this.keypressTimeout=this.options.keypressTimeout!==void 0?this.options.keypressTimeout:null}async keypress(e,t=e?wr(e,{}):{}){let s=Date.now(),r=s-this.lastKeypress;this.lastKeypress=s;let n=t.name==="return"||t.name==="enter",l=this.state.prevKeypress,a;if(this.state.prevKeypress=t,this.keypressTimeout!=null&&n){if(r<this.keypressTimeout)return this.submit();this.state.multilineBuffer=this.state.multilineBuffer||"",this.state.multilineBuffer+=e,a=!0,l=null}return(a||this.options.multiline&&n)&&(!l||l.name!=="return")?this.append(`
`,t):super.keypress(e,t)}moveCursor(e){this.cursor+=e}reset(){return this.input=this.value="",this.cursor=0,this.render()}dispatch(e,t){if(!e||t.ctrl||t.code)return this.alert();this.append(e)}append(e){let{cursor:t,input:s}=this.state;this.input=`${s}`.slice(0,t)+e+`${s}`.slice(t),this.moveCursor(String(e).length),this.render()}insert(e){this.append(e)}delete(){let{cursor:e,input:t}=this.state;if(e<=0)return this.alert();this.input=`${t}`.slice(0,e-1)+`${t}`.slice(e),this.moveCursor(-1),this.render()}deleteForward(){let{cursor:e,input:t}=this.state;if(t[e]===void 0)return this.alert();this.input=`${t}`.slice(0,e)+`${t}`.slice(e+1),this.render()}cutForward(){let e=this.cursor;if(this.input.length<=e)return this.alert();this.state.clipboard.push(this.input.slice(e)),this.input=this.input.slice(0,e),this.render()}cutLeft(){let e=this.cursor;if(e===0)return this.alert();let t=this.input.slice(0,e),s=this.input.slice(e),r=t.split(" ");this.state.clipboard.push(r.pop()),this.input=r.join(" "),this.cursor=this.input.length,this.input+=s,this.render()}paste(){if(!this.state.clipboard.length)return this.alert();this.insert(this.state.clipboard.pop()),this.render()}toggleCursor(){this.state.prevCursor?(this.cursor=this.state.prevCursor,this.state.prevCursor=0):(this.state.prevCursor=this.cursor,this.cursor=0),this.render()}first(){this.cursor=0,this.render()}last(){this.cursor=this.input.length-1,this.render()}next(){let e=this.initial!=null?String(this.initial):"";if(!e||!e.startsWith(this.input))return this.alert();this.input=this.initial,this.cursor=this.initial.length,this.render()}prev(){if(!this.input)return this.alert();this.reset()}backward(){return this.left()}forward(){return this.right()}right(){return this.cursor>=this.input.length?this.alert():(this.moveCursor(1),this.render())}left(){return this.cursor<=0?this.alert():(this.moveCursor(-1),this.render())}isValue(e){return!!e}async format(e=this.value){let t=await this.resolve(this.initial,this.state);return this.state.submitted?this.styles.submitted(e||t):xr(this,{input:e,initial:t,pos:this.cursor})}async render(){let e=this.state.size,t=await this.prefix(),s=await this.separator(),r=await this.message(),n=[t,r,s].filter(Boolean).join(" ");this.state.prompt=n;let l=await this.header(),a=await this.format(),o=await this.error()||await this.hint(),h=await this.footer();o&&!a.includes(o)&&(a+=" "+o),n+=" "+a,this.clear(e),this.write([l,n,h].filter(Boolean).join(`
`)),this.restore()}};fi.exports=Me});var gi=m((nl,mi)=>{"use strict";u();var Cr=i=>i.filter((e,t)=>i.lastIndexOf(e)===t),pe=i=>Cr(i).filter(Boolean);mi.exports=(i,e={},t="")=>{let{past:s=[],present:r=""}=e,n,l;switch(i){case"prev":case"undo":return n=s.slice(0,s.length-1),l=s[s.length-1]||"",{past:pe([t,...n]),present:l};case"next":case"redo":return n=s.slice(1),l=s[0]||"",{past:pe([...n,t]),present:l};case"save":return{past:pe([...s,t]),present:""};case"remove":return l=pe(s.filter(a=>a!==t)),r="",l.length&&(r=l.pop()),{past:l,present:r};default:throw new Error(`Invalid action: "${i}"`)}}});var Ue=m((al,bi)=>{"use strict";u();var Sr=V(),yi=gi(),Fe=class extends Sr{constructor(e){super(e);let t=this.options.history;if(t&&t.store){let s=t.values||this.initial;this.autosave=!!t.autosave,this.store=t.store,this.data=this.store.get("values")||{past:[],present:s},this.initial=this.data.present||this.data.past[this.data.past.length-1]}}completion(e){return this.store?(this.data=yi(e,this.data,this.input),this.data.present?(this.input=this.data.present,this.cursor=this.input.length,this.render()):this.alert()):this.alert()}altUp(){return this.completion("prev")}altDown(){return this.completion("next")}prev(){return this.save(),super.prev()}save(){this.store&&(this.data=yi("save",this.data,this.input),this.store.set("values",this.data))}submit(){return this.store&&this.autosave===!0&&this.save(),super.submit()}};bi.exports=Fe});var xi=m((hl,wi)=>{"use strict";u();var qr=V(),Ne=class extends qr{format(){return""}};wi.exports=Ne});var Ci=m((cl,vi)=>{"use strict";u();var kr=V(),He=class extends kr{constructor(e={}){super(e),this.sep=this.options.separator||/, */,this.initial=e.initial||""}split(e=this.value){return e?String(e).split(this.sep):[]}format(){let e=this.state.submitted?this.styles.primary:t=>t;return this.list.map(e).join(", ")}async submit(e){let t=this.state.error||await this.validate(this.list,this.state);return t!==!0?(this.state.error=t,super.submit()):(this.value=this.list,super.submit())}get list(){return this.split()}};vi.exports=He});var qi=m((pl,Si)=>{"use strict";u();var $r=F(),Ve=class extends $r{constructor(e){super({...e,multiple:!0})}};Si.exports=Ve});var We=m((ml,ki)=>{"use strict";u();var Pr=V(),Ke=class extends Pr{constructor(e={}){super({style:"number",...e}),this.min=this.isValue(e.min)?this.toNumber(e.min):-1/0,this.max=this.isValue(e.max)?this.toNumber(e.max):1/0,this.delay=e.delay!=null?e.delay:1e3,this.float=e.float!==!1,this.round=e.round===!0||e.float===!1,this.major=e.major||10,this.minor=e.minor||1,this.initial=e.initial!=null?e.initial:"",this.input=String(this.initial),this.cursor=this.input.length,this.cursorShow()}append(e){return!/[-+.]/.test(e)||e==="."&&this.input.includes(".")?this.alert("invalid number"):super.append(e)}number(e){return super.append(e)}next(){return this.input&&this.input!==this.initial?this.alert():this.isValue(this.initial)?(this.input=this.initial,this.cursor=String(this.initial).length,this.render()):this.alert()}up(e){let t=e||this.minor,s=this.toNumber(this.input);return s>this.max+t?this.alert():(this.input=`${s+t}`,this.render())}down(e){let t=e||this.minor,s=this.toNumber(this.input);return s<this.min-t?this.alert():(this.input=`${s-t}`,this.render())}shiftDown(){return this.down(this.major)}shiftUp(){return this.up(this.major)}format(e=this.input){return typeof this.options.format=="function"?this.options.format.call(this,e):this.styles.info(e)}toNumber(e=""){return this.float?+e:Math.round(+e)}isValue(e){return/^[-+]?[0-9]+((\.)|(\.[0-9]+))?$/.test(e)}submit(){let e=[this.input,this.initial].find(t=>this.isValue(t));return this.value=this.toNumber(e||0),super.submit()}};ki.exports=Ke});var Pi=m((yl,$i)=>{"use strict";u();$i.exports=We()});var Ei=m((wl,ji)=>{"use strict";u();var jr=V(),Ge=class extends jr{constructor(e){super(e),this.cursorShow()}format(e=this.input){return this.keypressed?(this.state.submitted?this.styles.primary:this.styles.muted)(this.symbols.asterisk.repeat(e.length)):""}};ji.exports=Ge});var Ri=m((vl,Oi)=>{"use strict";u();var Er=T(),Ar=te(),Ai=E(),Ze=class extends Ar{constructor(e={}){super(e),this.widths=[].concat(e.messageWidth||50),this.align=[].concat(e.align||"left"),this.linebreak=e.linebreak||!1,this.edgeLength=e.edgeLength||3,this.newline=e.newline||`
   `;let t=e.startNumber||1;typeof this.scale=="number"&&(this.scaleKey=!1,this.scale=Array(this.scale).fill(0).map((s,r)=>({name:r+t})))}async reset(){return this.tableized=!1,await super.reset(),this.render()}tableize(){if(this.tableized===!0)return;this.tableized=!0;let e=0;for(let t of this.choices){e=Math.max(e,t.message.length),t.scaleIndex=t.initial||2,t.scale=[];for(let s=0;s<this.scale.length;s++)t.scale.push({index:s})}this.widths[0]=Math.min(this.widths[0],e+3)}async dispatch(e,t){if(this.multiple)return this[t.name]?await this[t.name](e,t):await super.dispatch(e,t);this.alert()}heading(e,t,s){return this.styles.strong(e)}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let e=this.focused;return e.scaleIndex>=this.scale.length-1?this.alert():(e.scaleIndex++,this.render())}left(){let e=this.focused;return e.scaleIndex<=0?this.alert():(e.scaleIndex--,this.render())}indent(){return""}format(){return this.state.submitted?this.choices.map(t=>this.styles.info(t.index)).join(", "):""}pointer(){return""}renderScaleKey(){return this.scaleKey===!1||this.state.submitted?"":["",...this.scale.map(s=>`   ${s.name} - ${s.message}`)].map(s=>this.styles.muted(s)).join(`
`)}renderScaleHeading(e){let t=this.scale.map(o=>o.name);typeof this.options.renderScaleHeading=="function"&&(t=this.options.renderScaleHeading.call(this,e));let s=this.scaleLength-t.join("").length,r=Math.round(s/(t.length-1)),l=t.map(o=>this.styles.strong(o)).join(" ".repeat(r)),a=" ".repeat(this.widths[0]);return this.margin[3]+a+this.margin[1]+l}scaleIndicator(e,t,s){if(typeof this.options.scaleIndicator=="function")return this.options.scaleIndicator.call(this,e,t,s);let r=e.scaleIndex===t.index;return t.disabled?this.styles.hint(this.symbols.radio.disabled):r?this.styles.success(this.symbols.radio.on):this.symbols.radio.off}renderScale(e,t){let s=e.scale.map(n=>this.scaleIndicator(e,n,t)),r=this.term==="Hyper"?"":" ";return s.join(r+this.symbols.line.repeat(this.edgeLength))}async renderChoice(e,t){await this.onChoice(e,t);let s=this.index===t,r=await this.pointer(e,t),n=await e.hint;n&&!Ai.hasColor(n)&&(n=this.styles.muted(n));let l=g=>this.margin[3]+g.replace(/\s+$/,"").padEnd(this.widths[0]," "),a=this.newline,o=this.indent(e),h=await this.resolve(e.message,this.state,e,t),d=await this.renderScale(e,t),c=this.margin[1]+this.margin[3];this.scaleLength=Er(d).length,this.widths[0]=Math.min(this.widths[0],this.width-this.scaleLength-c.length);let w=Ai.wordWrap(h,{width:this.widths[0],newline:a}).split(`
`).map(g=>l(g)+this.margin[1]);return s&&(d=this.styles.info(d),w=w.map(g=>this.styles.info(g))),w[0]+=d,this.linebreak&&w.push(""),[o+r,w.join(`
`)].filter(Boolean)}async renderChoices(){if(this.state.submitted)return"";this.tableize();let e=this.visible.map(async(r,n)=>await this.renderChoice(r,n)),t=await Promise.all(e),s=await this.renderScaleHeading();return this.margin[0]+[s,...t.map(r=>r.join(" "))].join(`
`)}async render(){let{submitted:e,size:t}=this.state,s=await this.prefix(),r=await this.separator(),n=await this.message(),l="";this.options.promptLine!==!1&&(l=[s,n,r,""].join(" "),this.state.prompt=l);let a=await this.header(),o=await this.format(),h=await this.renderScaleKey(),d=await this.error()||await this.hint(),c=await this.renderChoices(),S=await this.footer(),w=this.emptyError;o&&(l+=o),d&&!l.includes(d)&&(l+=" "+d),e&&!o&&!c.trim()&&this.multiple&&w!=null&&(l+=this.styles.danger(w)),this.clear(t),this.write([a,l,h,c,S].filter(Boolean).join(`
`)),this.state.submitted||this.write(this.margin[2]),this.restore()}submit(){this.value={};for(let e of this.choices)this.value[e.name]=e.scaleIndex;return this.base.submit.call(this)}};Oi.exports=Ze});var Bi=m((Sl,Di)=>{"use strict";u();var _i=T(),Or=(i="")=>typeof i=="string"?i.replace(/^['"]|['"]$/g,""):"",Je=class{constructor(e){this.name=e.key,this.field=e.field||{},this.value=Or(e.initial||this.field.initial||""),this.message=e.message||this.name,this.cursor=0,this.input="",this.lines=[]}},Rr=async(i={},e={},t=s=>s)=>{let s=new Set,r=i.fields||[],n=i.template,l=[],a=[],o=[],h=1;typeof n=="function"&&(n=await n());let d=-1,c=()=>n[++d],S=()=>n[d+1],w=g=>{g.line=h,l.push(g)};for(w({type:"bos",value:""});d<n.length-1;){let g=c();if(/^[^\S\n ]$/.test(g)){w({type:"text",value:g});continue}if(g===`
`){w({type:"newline",value:g}),h++;continue}if(g==="\\"){g+=c(),w({type:"text",value:g});continue}if((g==="$"||g==="#"||g==="{")&&S()==="{"){let $=c();g+=$;let y={type:"template",open:g,inner:"",close:"",value:g},v;for(;v=c();){if(v==="}"){S()==="}"&&(v+=c()),y.value+=v,y.close=v;break}v===":"?(y.initial="",y.key=y.inner):y.initial!==void 0&&(y.initial+=v),y.value+=v,y.inner+=v}y.template=y.open+(y.initial||y.inner)+y.close,y.key=y.key||y.inner,hasOwnProperty.call(e,y.key)&&(y.initial=e[y.key]),y=t(y),w(y),o.push(y.key),s.add(y.key);let b=a.find(k=>k.name===y.key);y.field=r.find(k=>k.name===y.key),b||(b=new Je(y),a.push(b)),b.lines.push(y.line-1);continue}let C=l[l.length-1];C.type==="text"&&C.line===h?C.value+=g:w({type:"text",value:g})}return w({type:"eos",value:""}),{input:n,tabstops:l,unique:s,keys:o,items:a}};Di.exports=async i=>{let e=i.options,t=new Set(e.required===!0?[]:e.required||[]),s={...e.values,...e.initial},{tabstops:r,items:n,keys:l}=await Rr(e,s),a=Ye("result",i,e),o=Ye("format",i,e),h=Ye("validate",i,e,!0),d=i.isValue.bind(i);return async(c={},S=!1)=>{let w=0;c.required=t,c.items=n,c.keys=l,c.output="";let g=async(v,b,k,A)=>{let R=await h(v,b,k,A);return R===!1?"Invalid field "+k.name:R};for(let v of r){let b=v.value,k=v.key;if(v.type!=="template"){b&&(c.output+=b);continue}if(v.type==="template"){let A=n.find(K=>K.name===k);e.required===!0&&c.required.add(A.name);let R=[A.input,c.values[A.value],A.value,b].find(d),Q=(A.field||{}).message||v.inner;if(S){let K=await g(c.values[k],c,A,w);if(K&&typeof K=="string"||K===!1){c.invalid.set(k,K);continue}c.invalid.delete(k);let ds=await a(c.values[k],c,A,w);c.output+=_i(ds);continue}A.placeholder=!1;let cs=b;b=await o(b,c,A,w),R!==b?(c.values[k]=R,b=i.styles.typing(R),c.missing.delete(Q)):(c.values[k]=void 0,R=`<${Q}>`,b=i.styles.primary(R),A.placeholder=!0,c.required.has(k)&&c.missing.add(Q)),c.missing.has(Q)&&c.validating&&(b=i.styles.warning(R)),c.invalid.has(k)&&c.validating&&(b=i.styles.danger(R)),w===c.index&&(cs!==b?b=i.styles.underline(b):b=i.styles.heading(_i(b))),w++}b&&(c.output+=b)}let C=c.output.split(`
`).map(v=>" "+v),$=n.length,y=0;for(let v of n)c.invalid.has(v.name)&&v.lines.forEach(b=>{C[b][0]===" "&&(C[b]=c.styles.danger(c.symbols.bullet)+C[b].slice(1))}),i.isValue(c.values[v.name])&&y++;return c.completed=(y/$*100).toFixed(0),c.output=C.join(`
`),c.output}};function Ye(i,e,t,s){return(r,n,l,a)=>typeof l.field[i]=="function"?l.field[i].call(e,r,n,l,a):[s,r].find(o=>e.isValue(o))}});var Li=m((kl,Ii)=>{"use strict";u();var _r=T(),Dr=Bi(),Br=G(),Qe=class extends Br{constructor(e){super(e),this.cursorHide(),this.reset(!0)}async initialize(){this.interpolate=await Dr(this),await super.initialize()}async reset(e){this.state.keys=[],this.state.invalid=new Map,this.state.missing=new Set,this.state.completed=0,this.state.values={},e!==!0&&(await this.initialize(),await this.render())}moveCursor(e){let t=this.getItem();this.cursor+=e,t.cursor+=e}dispatch(e,t){if(!t.code&&!t.ctrl&&e!=null&&this.getItem()){this.append(e,t);return}this.alert()}append(e,t){let s=this.getItem(),r=s.input.slice(0,this.cursor),n=s.input.slice(this.cursor);this.input=s.input=`${r}${e}${n}`,this.moveCursor(1),this.render()}delete(){let e=this.getItem();if(this.cursor<=0||!e.input)return this.alert();let t=e.input.slice(this.cursor),s=e.input.slice(0,this.cursor-1);this.input=e.input=`${s}${t}`,this.moveCursor(-1),this.render()}increment(e){return e>=this.state.keys.length-1?0:e+1}decrement(e){return e<=0?this.state.keys.length-1:e-1}first(){this.state.index=0,this.render()}last(){this.state.index=this.state.keys.length-1,this.render()}right(){if(this.cursor>=this.input.length)return this.alert();this.moveCursor(1),this.render()}left(){if(this.cursor<=0)return this.alert();this.moveCursor(-1),this.render()}prev(){this.state.index=this.decrement(this.state.index),this.getItem(),this.render()}next(){this.state.index=this.increment(this.state.index),this.getItem(),this.render()}up(){this.prev()}down(){this.next()}format(e){let t=this.state.completed<100?this.styles.warning:this.styles.success;return this.state.submitted===!0&&this.state.completed!==100&&(t=this.styles.danger),t(`${this.state.completed}% completed`)}async render(){let{index:e,keys:t=[],submitted:s,size:r}=this.state,n=[this.options.newline,`
`].find(v=>v!=null),l=await this.prefix(),a=await this.separator(),o=await this.message(),h=[l,o,a].filter(Boolean).join(" ");this.state.prompt=h;let d=await this.header(),c=await this.error()||"",S=await this.hint()||"",w=s?"":await this.interpolate(this.state),g=this.state.key=t[e]||"",C=await this.format(g),$=await this.footer();C&&(h+=" "+C),S&&!C&&this.state.completed===0&&(h+=" "+S),this.clear(r);let y=[d,h,w,$,c.trim()];this.write(y.filter(Boolean).join(n)),this.restore()}getItem(e){let{items:t,keys:s,index:r}=this.state,n=t.find(l=>l.name===s[r]);return n&&n.input!=null&&(this.input=n.input,this.cursor=n.cursor),n}async submit(){typeof this.interpolate!="function"&&await this.initialize(),await this.interpolate(this.state,!0);let{invalid:e,missing:t,output:s,values:r}=this.state;if(e.size){let a="";for(let[o,h]of e)a+=`Invalid ${o}: ${h}
`;return this.state.error=a,super.submit()}if(t.size)return this.state.error="Required: "+[...t.keys()].join(", "),super.submit();let l=_r(s).split(`
`).map(a=>a.slice(1)).join(`
`);return this.value={values:r,result:l},super.submit()}};Ii.exports=Qe});var Ti=m((Pl,zi)=>{"use strict";u();var Ir="(Use <shift>+<up/down> to sort)",Lr=F(),Xe=class extends Lr{constructor(e){super({...e,reorder:!1,sort:!0,multiple:!0}),this.state.hint=[this.options.hint,Ir].find(this.isValue.bind(this))}indicator(){return""}async renderChoice(e,t){let s=await super.renderChoice(e,t),r=this.symbols.identicalTo+" ",n=this.index===t&&this.sorting?this.styles.muted(r):"  ";return this.options.drag===!1&&(n=""),this.options.numbered===!0?n+`${t+1} - `+s:n+s}get selected(){return this.choices}submit(){return this.value=this.choices.map(e=>e.value),super.submit()}};zi.exports=Xe});var Fi=m((El,Mi)=>{"use strict";u();var zr=te(),et=class extends zr{constructor(e={}){if(super(e),this.emptyError=e.emptyError||"No items were selected",this.term=process.env.TERM_PROGRAM,!this.options.header){let t=["","4 - Strongly Agree","3 - Agree","2 - Neutral","1 - Disagree","0 - Strongly Disagree",""];t=t.map(s=>this.styles.muted(s)),this.state.header=t.join(`
   `)}}async toChoices(...e){if(this.createdScales)return!1;this.createdScales=!0;let t=await super.toChoices(...e);for(let s of t)s.scale=Tr(5,this.options),s.scaleIdx=2;return t}dispatch(){this.alert()}space(){let e=this.focused,t=e.scale[e.scaleIdx],s=t.selected;return e.scale.forEach(r=>r.selected=!1),t.selected=!s,this.render()}indicator(){return""}pointer(){return""}separator(){return this.styles.muted(this.symbols.ellipsis)}right(){let e=this.focused;return e.scaleIdx>=e.scale.length-1?this.alert():(e.scaleIdx++,this.render())}left(){let e=this.focused;return e.scaleIdx<=0?this.alert():(e.scaleIdx--,this.render())}indent(){return"   "}async renderChoice(e,t){await this.onChoice(e,t);let s=this.index===t,r=this.term==="Hyper",n=r?9:8,l=r?"":" ",a=this.symbols.line.repeat(n),o=" ".repeat(n+(r?0:1)),h=b=>(b?this.styles.success("\u25C9"):"\u25EF")+l,d=t+1+".",c=s?this.styles.heading:this.styles.noop,S=await this.resolve(e.message,this.state,e,t),w=this.indent(e),g=w+e.scale.map((b,k)=>h(k===e.scaleIdx)).join(a),C=b=>b===e.scaleIdx?c(b):b,$=w+e.scale.map((b,k)=>C(k)).join(o),y=()=>[d,S].filter(Boolean).join(" "),v=()=>[y(),g,$," "].filter(Boolean).join(`
`);return s&&(g=this.styles.cyan(g),$=this.styles.cyan($)),v()}async renderChoices(){if(this.state.submitted)return"";let e=this.visible.map(async(s,r)=>await this.renderChoice(s,r)),t=await Promise.all(e);return t.length||t.push(this.styles.danger("No matching choices")),t.join(`
`)}format(){return this.state.submitted?this.choices.map(t=>this.styles.info(t.scaleIdx)).join(", "):""}async render(){let{submitted:e,size:t}=this.state,s=await this.prefix(),r=await this.separator(),n=await this.message(),l=[s,n,r].filter(Boolean).join(" ");this.state.prompt=l;let a=await this.header(),o=await this.format(),h=await this.error()||await this.hint(),d=await this.renderChoices(),c=await this.footer();(o||!h)&&(l+=" "+o),h&&!l.includes(h)&&(l+=" "+h),e&&!o&&!d&&this.multiple&&this.type!=="form"&&(l+=this.styles.danger(this.emptyError)),this.clear(t),this.write([l,a,d,c].filter(Boolean).join(`
`)),this.restore()}submit(){this.value={};for(let e of this.choices)this.value[e.name]=e.scaleIdx;return this.base.submit.call(this)}};function Tr(i,e={}){if(Array.isArray(e.scale))return e.scale.map(s=>({...s}));let t=[];for(let s=1;s<i+1;s++)t.push({i:s,selected:!1});return t}Mi.exports=et});var Ni=m((Ol,Ui)=>{"use strict";u();Ui.exports=Ue()});var Vi=m((_l,Hi)=>{"use strict";u();var Mr=de(),tt=class extends Mr{async initialize(){await super.initialize(),this.value=this.initial=this.resolve(this.options.initial),this.disabled=this.options.disabled||"no",this.enabled=this.options.enabled||"yes",await this.render()}reset(){this.value=this.initial,this.render()}delete(){this.alert()}toggle(){this.value=!this.value,this.render()}enable(){if(this.value===!0)return this.alert();this.value=!0,this.render()}disable(){if(this.value===!1)return this.alert();this.value=!1,this.render()}up(){this.toggle()}down(){this.toggle()}right(){this.toggle()}left(){this.toggle()}next(){this.toggle()}prev(){this.toggle()}dispatch(e="",t){switch(e.toLowerCase()){case" ":return this.toggle();case"1":case"y":case"t":return this.enable();case"0":case"n":case"f":return this.disable();default:return this.alert()}}format(){let e=s=>this.styles.primary.underline(s);return[this.value?this.disabled:e(this.disabled),this.value?e(this.enabled):this.enabled].join(this.styles.muted(" / "))}async render(){let{size:e}=this.state,t=await this.header(),s=await this.prefix(),r=await this.separator(),n=await this.message(),l=await this.format(),a=await this.error()||await this.hint(),o=await this.footer(),h=[s,n,r,l].join(" ");this.state.prompt=h,a&&!h.includes(a)&&(h+=" "+a),this.clear(e),this.write([t,h,o].filter(Boolean).join(`
`)),this.write(this.margin[2]),this.restore()}};Hi.exports=tt});var Wi=m((Bl,Ki)=>{"use strict";u();var Fr=F(),it=class extends Fr{constructor(e){if(super(e),typeof this.options.correctChoice!="number"||this.options.correctChoice<0)throw new Error("Please specify the index of the correct answer from the list of choices")}async toChoices(e,t){let s=await super.toChoices(e,t);if(s.length<2)throw new Error("Please give at least two choices to the user");if(this.options.correctChoice>s.length)throw new Error("Please specify the index of the correct answer from the list of choices");return s}check(e){return e.index===this.options.correctChoice}async result(e){return{selectedAnswer:e,correctAnswer:this.options.choices[this.options.correctChoice].value,correct:await this.check(this.state)}}};Ki.exports=it});var Zi=m(st=>{"use strict";u();var Gi=E(),P=(i,e)=>{Gi.defineExport(st,i,e),Gi.defineExport(st,i.toLowerCase(),e)};P("AutoComplete",()=>ti());P("BasicAuth",()=>oi());P("Confirm",()=>ci());P("Editable",()=>pi());P("Form",()=>ce());P("Input",()=>Ue());P("Invisible",()=>xi());P("List",()=>Ci());P("MultiSelect",()=>qi());P("Numeral",()=>Pi());P("Password",()=>Ei());P("Scale",()=>Ri());P("Select",()=>F());P("Snippet",()=>Li());P("Sort",()=>Ti());P("Survey",()=>Fi());P("Text",()=>Ni());P("Toggle",()=>Vi());P("Quiz",()=>Wi())});var Ji=m((Tl,Yi)=>{"use strict";u();Yi.exports={ArrayPrompt:te(),AuthPrompt:Ie(),BooleanPrompt:de(),NumberPrompt:We(),StringPrompt:V()}});var es=m((Fl,Xi)=>{"use strict";u();var Qi=ne("assert"),nt=ne("events"),U=E(),L=class extends nt{constructor(e,t){super(),this.options=U.merge({},e),this.answers={...t}}register(e,t){if(U.isObject(e)){for(let r of Object.keys(e))this.register(r,e[r]);return this}Qi.equal(typeof t,"function","expected a function");let s=e.toLowerCase();return t.prototype instanceof this.Prompt?this.prompts[s]=t:this.prompts[s]=t(this.Prompt,this),this}async prompt(e=[]){for(let t of[].concat(e))try{typeof t=="function"&&(t=await t.call(this)),await this.ask(U.merge({},this.options,t))}catch(s){return Promise.reject(s)}return this.answers}async ask(e){typeof e=="function"&&(e=await e.call(this));let t=U.merge({},this.options,e),{type:s,name:r}=e,{set:n,get:l}=U;if(typeof s=="function"&&(s=await s.call(this,e,this.answers)),!s)return this.answers[r];s==="number"&&(s="numeral"),Qi(this.prompts[s],`Prompt "${s}" is not registered`);let a=new this.prompts[s](t),o=l(this.answers,r);a.state.answers=this.answers,a.enquirer=this,r&&a.on("submit",d=>{this.emit("answer",r,d,a),n(this.answers,r,d)});let h=a.emit.bind(a);return a.emit=(...d)=>(this.emit.call(this,...d),h(...d)),this.emit("prompt",a,this),t.autofill&&o!=null?(a.value=a.input=o,t.autofill==="show"&&await a.submit()):o=a.value=await a.run(),o}use(e){return e.call(this,this),this}set Prompt(e){this._Prompt=e}get Prompt(){return this._Prompt||this.constructor.Prompt}get prompts(){return this.constructor.prompts}static set Prompt(e){this._Prompt=e}static get Prompt(){return this._Prompt||G()}static get prompts(){return Zi()}static get types(){return Ji()}static get prompt(){let e=(t,...s)=>{let r=new this(...s),n=r.emit.bind(r);return r.emit=(...l)=>(e.emit(...l),n(...l)),r.prompt(t)};return U.mixinEmitter(e,new nt),e}};U.mixinEmitter(L,new nt);var rt=L.prompts;for(let i of Object.keys(rt)){let e=i.toLowerCase(),t=s=>new rt[i](s).run();L.prompt[e]=t,L[e]=t,L[i]||Reflect.defineProperty(L,i,{get:()=>rt[i]})}var ie=i=>{U.defineExport(L,i,()=>L.types[i])};ie("ArrayPrompt");ie("AuthPrompt");ie("BooleanPrompt");ie("NumberPrompt");ie("StringPrompt");Xi.exports=L});u();var us=xs(es(),1);import"colors";import{Command as Xr}from"commander";import hs from"ora";u();import Ur from"fs";import ts from"path";import{createRequire as Nr}from"module";import{register as Hr}from"esbuild-register/dist/node";var Vr=["deloyn.config.ts","deloyn.config.js"];async function is(){let i=process.cwd(),e=Vr.find(n=>Ur.existsSync(ts.join(i,n)));e||(console.error("\u274C No deloyn config file found."),process.exit(1));let t=ts.resolve(i,e);e.endsWith(".ts")&&Hr({target:"node18"});let r=Nr(import.meta.url)(t);return r.default||r}u();import{Client as Wr}from"ssh2";import Gr from"ssh2-sftp-client";import rs from"fs-extra";import _ from"colors";u();import ss from"fs-extra";import lt from"path";import Y from"colors";async function Kr(i,e){for(let t=0;t<i.length;t+=e){let s=i.slice(t,t+e);await Promise.all(s.map(r=>r()))}}async function at(i,e,t,s,r,n){let l=await ss.readdir(i),a=[];for(let o of l){if(s.has(o)){console.info(Y.yellow(`Skipping: ${lt.join(i,o)}`));continue}a.push(async()=>{let h=lt.join(i,o),d=lt.join(e,o).replace(/\\/g,"/"),c=await ss.stat(h);c.isDirectory()?(await t.mkdir(d,!0),console.info(Y.green(`\u{1F4C1} Directory: ${d}`)),await at(h,d,t,s,r,n)):(await t.put(h,d),n?.(c.size),console.info(Y.cyan(`\u{1F4C4} Uploaded: ${d}`)))})}await Kr(a,r)}async function ot(i,e){return new Promise((t,s)=>{i.exec(e,(r,n)=>{if(r)return s(r);if(!n)return s(new Error("No stream returned."));n.on("close",(l,a)=>{console.info(Y.magenta(`\u{1F6E0}\uFE0F  Command finished (Code: ${l}, Signal: ${a})`)),t()}).on("data",l=>console.info(Y.gray(l.toString().trim()))).stderr.on("data",l=>console.error(Y.red(l.toString().trim())))})})}async function ns(i){let{serverIp:e,username:t,remotePath:s,sshKey:r,excluded:n=[],batchSize:l=5,scripts:a=[],localPath:o=process.cwd()}=i,h=new Set(n),d=0,c=0,S=new Wr,w=new Gr,g=Date.now();console.info(_.yellow("\u{1F50C} Connecting to SSH..."));try{await new Promise((v,b)=>{S.on("ready",v).on("error",b).connect({host:e,username:t,privateKey:rs.readFileSync(r,"utf8")})}),console.log(_.green("\u2705 SSH connected.")),await w.connect({host:e,username:t,privateKey:rs.readFileSync(r,"utf8")}),console.log(_.green("\u2705 SFTP connected.")),console.info(_.red(`\u{1F9F9} Removing remote dir: ${s}`)),await ot(S,`rm -rf ${s} && mkdir -p ${s}`);let C=Date.now();console.info(_.blue("\u{1F4E6} Starting file upload...")),await at(o,s,w,h,l,v=>{d++,c+=v});let $=(Date.now()-C)/1e3;console.log(_.green(`\u23F1\uFE0F Upload completed in ${$.toFixed(2)}s (${d} files, ${(c/1024/1024).toFixed(2)} MB)`)),console.info(_.cyan("\u{1F680} Running publishing commands...")),await ot(S,`cd ${s} && ${a.join(" && ")} && echo "\u2705 Publishing complete."`);let y=(Date.now()-g)/1e3;console.log(_.green(`\u{1F389} Publishing finished in ${y.toFixed(2)}s`))}catch(C){throw console.error(_.red("\u{1F4A5} Publishing failed: "+C)),C}finally{try{await w.end(),console.info(_.yellow("\u{1F4F4} SFTP disconnected."))}catch(C){console.error(_.red("\u26A0\uFE0F SFTP disconnect error: "+C))}try{S.end(),console.info(_.yellow("\u{1F4F4} SSH disconnected."))}catch(C){console.error(_.red("\u26A0\uFE0F SSH disconnect error: "+C))}}}u();import Zr from"node-fetch";var B="deloyn",se="1.0.10";var ls="xjectro";async function ut(){try{let i=await Zr("https://registry.npmjs.org/deloyn/latest");if(!i.ok)return;let t=(await i.json()).version;se!==t&&(console.log(`
\u26A0 Update available: ${se} \u2192 ${t}`.yellow),console.log(`Run ${"npm i -g deloyn".cyan} to update.
`.yellow))}catch{}}u();import{execSync as Yr}from"child_process";import Jr from"figlet";import fe from"gradient-string";function re(i){return i.charAt(0).toUpperCase()+i.slice(1)}function as(){console.log(`
\u{1F504} Updating ${B} to latest version...
`.cyan);try{Yr(`npm install -g ${B}`,{stdio:"inherit"}),console.log(`
\u2705 ${re(B)} successfully updated!
`.green)}catch(i){console.error(`
\u274C Failed to update ${B}.`.red),i instanceof Error&&console.error(`${i.message}`.red),process.exit(1)}}function os(){let i=Jr.textSync(B.toUpperCase(),{font:"Slant",horizontalLayout:"default",verticalLayout:"default"});console.log(fe.pastel.multiline(i)),console.log(fe.vice(`
        \u{1F680} SSH Deploy CLI by ${ls}
`)),console.log(fe.pastel("For more information, visit our documentation.")),console.log(fe.pastel(`
       Follow us on GitHub for updates!
`))}u();function Qr(i){return i}var en=hs.default??hs,J=new Xr;J.name("deloyn").description(`${re(B)} - SSH Publish & Deploy CLI`.cyan).version(se,"-v, --version","Show CLI version").hook("preAction",async()=>{J.args[0]!=="update"&&await ut()});J.command("push").description("Start publishing".yellow).action(async()=>{let i=await is(),{confirm:e}=await(0,us.prompt)([{type:"confirm",name:"confirm",message:"Are you sure you want to start publishing?".yellow}]);e||(console.log("Operation cancelled.".red),process.exit(0));let t=en("Connecting and preparing files...".cyan).start();try{await ns(i),t.succeed("Publishing completed!".green)}catch(s){t.fail("An error occurred!".red),s instanceof Error&&console.error(`${s.message}`.red),process.exit(1)}});J.command("update").description(`Update ${B} CLI to latest version`.green).action(async()=>{await as()});J.command("help",{isDefault:!0}).description("Show help message".blue).action(()=>{console.log("".cyan),console.log("Usage:".underline.blue+` ${re(B)} [options] [command]
`.yellow),console.log(`${re(B)} - SSH Publish & Deploy CLI`.cyan),console.log("".cyan),console.log("Options:".green),console.log("  -v, --version  Show CLI version".yellow),console.log("  -h, --help     display help for command".yellow),console.log("".cyan),console.log("Commands:".green),console.log("  push           Start publishing".yellow),console.log(`  update         Update ${B} CLI to latest version`.green),console.log("  help           Show help message".blue)});async function tn(){os(),process.argv[2]!=="update"&&await ut(),J.parse(process.argv)}tn();export{Qr as defineConfig};
//# sourceMappingURL=index.mjs.map